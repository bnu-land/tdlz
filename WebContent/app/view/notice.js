/*
 * File: app/view/notice.js
 *
 * This file was generated by Sencha Architect version 2.2.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.notice', {
    extend: 'Ext.container.Container',
    alias: 'widget.notice',

        id: 'notice',
    layout: {
        type: 'card'
    },

    initComponent: function() {
        var me = this;

       
        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'tabpanel',
                    height: 476,
                    id: 'allNotice',
                    width: 764,
                    fixed: true,
                    activeTab: 0,
                    plain: true,
                    listeners: {
                        
                        tabchange: {
                            fn: me.onTabpanelTabChange,
                            scope: me
                        }
                    },
                    items: [
                        {
                            xtype: 'panel',
                            height: 407,
                            id: 'showNoticeGH',
                            width: 712,
                            layout: {
                                type: 'fit'
                            },
                            title: '规划方案',
                            items: [
                                    
                                   
                                {
                                    xtype: 'gridpanel',
                                    id: 'gridviewShowNoticeGH',
                                    header: false,
                                    title: 'My Grid Panel',
                                    allowDeselect: true,
                                    columnLines: true,
                                    emptyText: '没有数据',
                                    store: 'notice',
                                    columns: [
										
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'titleGH',
                                            width: 351,
                                            align: 'center',
                                            dataIndex: 'title',
                                            text: '公告标题'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'publisherGH',
                                            width: 125,
                                            align: 'center',
                                            dataIndex: 'publisher',
                                            text: '发布人'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'enclosureFlagGH',
                                            width: 125,
                                            align: 'center',
                                            dataIndex: 'enclosureFlag',
                                            text: '有无附件'
                                        },
                                        {
                                            xtype: 'datecolumn',
                                            id: 'publishTimeGH',
                                            align: 'center',
                                            dataIndex: 'date',
                                            text: '发布时间'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'projectIDGH',
                                            width: 351,
                                            align: 'center',
                                            dataIndex: 'projectID',
                                            text: '项目编号'
                                        },
                                        {
                                            xtype: 'actioncolumn',
                                            id: 'detailNoticeGH',
                                            width: 49,
                                            items: [
                                                {
                                                    handler: function(view, rowIndex, colIndex, item, e, record, row) {

                                                    	
                                                    	Ext.getCmp("showAllNotice").getComponent(0).setValue(record.get("title"));
                                                    	Ext.getCmp("showAllNotice").getComponent(1).setValue(record.get("publisher"));
                                                    	Ext.getCmp("showAllNotice").getComponent(2).setValue(record.get("date"));
                                                    	Ext.getCmp("showAllNotice").getComponent(3).setValue(record.get("content"));
                                                    	Ext.getCmp("showAllNotice").getComponent(4).setValue(record.get("id"));
                                                    
                                                    	Ext.getCmp("showAllNotice").getComponent(5).setValue(record.get("enclosurePath"));
                                                    	Ext.getCmp("showAllNotice").getComponent(6).setValue(record.get("projectID"));
                                                    	Ext.getCmp('downEnclosureFlag').setDisabled(false);
                                                    	if (record.get('enclosureFlag') == '无附件') {
                                                    		Ext.getCmp('downEnclosureFlag').setDisabled(true);
														}
                                                    	var id = record.get("id");
                                                    
                                                    	
                                                    	Ext.getCmp("showSuggestion").getStore().load({params:{start:0,limit:-1,
                                                    		date: "", noticeID: "" + id + ""}});
                                                    	
                                                    	
                                                    	Ext.getCmp("allNotice").setActiveTab(4);
                                                    },
                                                    altText: '详细',
                                                    icon: 'img/check.png'
                                                }
                                            ]
                                        },
                                        
                                        
                                    ],
                                    viewConfig: {
                                        id: 'gridviewNoticeGH',
                                        enableTextSelection: true
                                    },
                                    selModel: Ext.create('Ext.selection.CheckboxModel', {

                                    })
                                }
                            ],
                            dockedItems: [
                                {
                                    xtype: 'pagingtoolbar',
                                    dock: 'top',
                                    id: 'toolbarShowNoticeGH',
                                    width: 360,
                                    displayInfo: true,
                                    displayMsg: ' ',
                                    store: 'notice',
                                    items: [
                                        {
                                            xtype: 'button',
                                            id: 'deletNotice',
                                            text: '删除',
                                            listeners: {
                                                click: {
                                                    fn: me.deletNotice,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'datefield',
                                            id: 'findByDateShowNoticeGH',
                                            fieldLabel: '按日期查询',
                                            labelAlign: 'right',
                                            listeners: {
                                                
                                                change: {
                                                    fn: me.onChangeGH,
                                                    scope: me
                                                }
                                            },
                                            labelWidth: 80
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'panel',
                            height: 407,
                            id: 'showNoticeBC',
                            width: 712,
                            title: '补偿方案',
                            items: [
                                {
                                    xtype: 'gridpanel',
                                    id: 'gridviewShowNoticeBC',
                                    header: false,
                                    title: 'My Grid Panel',
                                    allowDeselect: true,
                                    columnLines: true,
                                    emptyText: '没有数据',
                                    store: 'notice',
                                    columns: [
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'titleBC',
                                            width: 351,
                                            align: 'center',
                                            dataIndex: 'title',
                                            text: '公告标题'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'publisherBC',
                                            width: 125,
                                            align: 'center',
                                            dataIndex: 'publisher',
                                            text: '发布人'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'enclosureFlagBC',
                                            width: 125,
                                            align: 'center',
                                            dataIndex: 'enclosureFlag',
                                            text: '有无附件'
                                        },
                                        {
                                            xtype: 'datecolumn',
                                            id: 'publishTimeBC',
                                            align: 'center',
                                            dataIndex: 'date',
                                            text: '发布时间'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'projectIDBC',
                                            width: 351,
                                            align: 'center',
                                            dataIndex: 'projectID',
                                            text: '项目编号'
                                        },
                                        {
                                            xtype: 'actioncolumn',
                                            id: 'detailNoticeBC',
                                            width: 49,
                                            items: [
                                                {
                                                    handler: function(view, rowIndex, colIndex, item, e, record, row) {

                                                    	Ext.getCmp("showAllNotice").getComponent(0).setValue(record.get("title"));
                                                    	Ext.getCmp("showAllNotice").getComponent(1).setValue(record.get("publisher"));
                                                    	Ext.getCmp("showAllNotice").getComponent(2).setValue(record.get("date"));
                                                    	Ext.getCmp("showAllNotice").getComponent(3).setValue(record.get("content"));
                                                    	Ext.getCmp("showAllNotice").getComponent(4).setValue(record.get("id"));
                                                    	Ext.getCmp("showAllNotice").getComponent(5).setValue(record.get("enclosurePath"));
                                                    	Ext.getCmp("showAllNotice").getComponent(6).setValue(record.get("projectID"));
                                                    	Ext.getCmp('downEnclosureFlag').setDisabled(false);
                                                    	if (record.get('enclosureFlag') == '无附件') {
                                                    		Ext.getCmp('downEnclosureFlag').setDisabled(true);
														}
                                                    	var id = record.get("id");
                                                    	Ext.getCmp("showSuggestion").getStore().load({params:{start:0,limit:-1,
                                                    		date: "", noticeID: "" + id + ""}});
                                                    	
                                                    	Ext.getCmp("allNotice").setActiveTab(4);
                                                    },
                                                    altText: '详细',
                                                    icon: 'img/check.png'
                                                }
                                            ]
                                        }
                                    ],
                                    viewConfig: {
                                        id: 'gridviewNoticeBC',
                                        enableTextSelection: true
                                    },
                                    selModel: Ext.create('Ext.selection.CheckboxModel', {

                                    })
                                }
                            ],
                            dockedItems: [
                                {
                                    xtype: 'pagingtoolbar',
                                    dock: 'top',
                                    id: 'toolbarShowNoticeBC',
                                    width: 360,
                                    displayInfo: true,
                                    store: 'notice',
                                    items: [
                                        {
                                            xtype: 'button',
                                            id: 'deletNotice4',
                                            text: '删除',
                                            listeners: {
                                                click: {
                                                    fn: me.deletNotice2,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'datefield',
                                            id: 'findByDateShowNoticeBC',
                                            fieldLabel: '按日期查询',
                                            labelAlign: 'right',
                                            listeners: {
                                                
                                                change: {
                                                    fn: me.onChangeBC,
                                                    scope: me
                                                }
                                            },
                                            labelWidth: 80
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'panel',
                            height: 407,
                            id: 'showNoticeAZ',
                            width: 712,
                            title: '安置方案',
                            items: [
                                {
                                    xtype: 'gridpanel',
                                    id: 'gridviewShowNoticeAZ',
                                    header: false,
                                    title: 'My Grid Panel',
                                    allowDeselect: true,
                                    columnLines: true,
                                    emptyText: '没有数据',
                                    store: 'notice',
                                    columns: [
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'titleAZ',
                                            width: 351,
                                            align: 'center',
                                            dataIndex: 'title',
                                            text: '公告标题'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'publisherAZ',
                                            width: 125,
                                            align: 'center',
                                            dataIndex: 'publisher',
                                            text: '发布人'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'enclosureFlagAZ',
                                            width: 125,
                                            align: 'center',
                                            dataIndex: 'enclosureFlag',
                                            text: '有无附件'
                                        },
                                        {
                                            xtype: 'datecolumn',
                                            id: 'publishTimeAZ',
                                            align: 'center',
                                            dataIndex: 'date',
                                            text: '发布时间'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'projectIDAZ',
                                            width: 351,
                                            align: 'center',
                                            dataIndex: 'projectID',
                                            text: '项目编号'
                                        },
                                        {
                                            xtype: 'actioncolumn',
                                            id: 'detailNoticeAZ',
                                            width: 49,
                                            items: [
                                                {
                                                    handler: function(view, rowIndex, colIndex, item, e, record, row) {

                                                    	Ext.getCmp("showAllNotice").getComponent(0).setValue(record.get("title"));
                                                    	Ext.getCmp("showAllNotice").getComponent(1).setValue(record.get("publisher"));
                                                    	Ext.getCmp("showAllNotice").getComponent(2).setValue(record.get("date"));
                                                    	Ext.getCmp("showAllNotice").getComponent(3).setValue(record.get("content"));
                                                    	
                                                    	Ext.getCmp("showAllNotice").getComponent(4).setValue(record.get("id"));
                                                    	Ext.getCmp("showAllNotice").getComponent(5).setValue(record.get("enclosurePath"));
                                                    	Ext.getCmp("showAllNotice").getComponent(6).setValue(record.get("projectID"));
                                                    	Ext.getCmp('downEnclosureFlag').setDisabled(false);
                                                    	if (record.get('enclosureFlag') == '无附件') {
                                                    		Ext.getCmp('downEnclosureFlag').setDisabled(true);
														}
                                                    	var id = record.get("id");
                                                    	Ext.getCmp("showSuggestion").getStore().load({params:{start:0,limit:-1,
                                                    		date: "", noticeID: "" + id + ""}});
                                                    	
                                                    	
                                                    	Ext.getCmp("allNotice").setActiveTab(4);
                                                    },
                                                    altText: '详细',
                                                    icon: 'img/check.png'
                                                }
                                            ]
                                        }
                                    ],
                                    viewConfig: {
                                        id: 'gridviewNoticeAZ',
                                        enableTextSelection: true
                                    },
                                    selModel: Ext.create('Ext.selection.CheckboxModel', {

                                    })
                                }
                            ],
                            dockedItems: [
                                {
                                    xtype: 'pagingtoolbar',
                                    dock: 'top',
                                    id: 'toolbarShowNoticeAZ',
                                    width: 360,
                                    displayInfo: true,
                                    store: 'notice',
                                    items: [
                                        {
                                            xtype: 'button',
                                            id: 'deletNotice5',
                                            text: '删除',
                                            listeners: {
                                                click: {
                                                    fn: me.deletNotice21,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'datefield',
                                            id: 'findByDateShowNoticeAZ',
                                            fieldLabel: '按日期查询',
                                            labelAlign: 'right',
                                            listeners: {
                                                
                                                change: {
                                                    fn: me.onChangeAZ,
                                                    scope: me
                                                }
                                            },
                                            labelWidth: 80
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'panel',
                            height: 407,
                            id: 'showNoticeFK',
                            width: 712,
                            title: '拆迁方案',
                            items: [
                                {
                                    xtype: 'gridpanel',
                                    id: 'gridviewShowNoticeFK',
                                    header: false,
                                    title: 'My Grid Panel',
                                    allowDeselect: true,
                                    columnLines: true,
                                    emptyText: '没有数据',
                                    store: 'notice',
                                    columns: [
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'titleFK',
                                            width: 351,
                                            align: 'center',
                                            dataIndex: 'title',
                                            text: '公告标题'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'publisherFK',
                                            width: 125,
                                            align: 'center',
                                            dataIndex: 'publisher',
                                            text: '发布人'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'enclosureFlagFK',
                                            width: 125,
                                            align: 'center',
                                            dataIndex: 'enclosureFlag',
                                            text: '有无附件'
                                        },
                                        {
                                            xtype: 'datecolumn',
                                            id: 'publishTimeFK',
                                            align: 'center',
                                            dataIndex: 'date',
                                            text: '发布时间'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'projectIDFK',
                                            width: 351,
                                            align: 'center',
                                            dataIndex: 'projectID',
                                            text: '项目编号'
                                        },
                                        {
                                            xtype: 'actioncolumn',
                                            id: 'detailNoticeFK',
                                            width: 49,
                                            items: [
                                                {
                                                    handler: function(view, rowIndex, colIndex, item, e, record, row) {

                                                    	Ext.getCmp("showAllNotice").getComponent(0).setValue(record.get("title"));
                                                    	
                                                    	
                                                    	Ext.getCmp("showAllNotice").getComponent(1).setValue(record.get("publisher"));
                                                    	Ext.getCmp("showAllNotice").getComponent(2).setValue(record.get("date"));
                                                    	Ext.getCmp("showAllNotice").getComponent(3).setValue(record.get("content"));
                                                    	Ext.getCmp("showAllNotice").getComponent(4).setValue(record.get("id"));
                                                    	Ext.getCmp("showAllNotice").getComponent(5).setValue(record.get("enclosurePath"));
                                                    	Ext.getCmp("showAllNotice").getComponent(6).setValue(record.get("projectID"));
                                                    	Ext.getCmp('downEnclosureFlag').setDisabled(false);
                                                    	if (record.get('enclosureFlag') == '无附件') {
                                                    		Ext.getCmp('downEnclosureFlag').setDisabled(true);
														}
                                                    	var id = record.get("id");
                                                    	Ext.getCmp("showSuggestion").getStore().load({params:{start:0,limit:-1,
                                                    		date: "", noticeID: "" + id + ""}});
                                                        Ext.getCmp("allNotice").setActiveTab(4);
                                                    },
                                                    altText: '详细',
                                                    icon: 'img/check.png'
                                                }
                                            ]
                                        }
                                    ],
                                    viewConfig: {
                                        id: 'gridviewNoticeFK',
                                        enableTextSelection: true
                                    },
                                    selModel: Ext.create('Ext.selection.CheckboxModel', {

                                    })
                                }
                            ],
                            dockedItems: [
                                {
                                    xtype: 'pagingtoolbar',
                                    dock: 'top',
                                    id: 'toolbarShowNoticeFK',
                                    width: 360,
                                    displayInfo: true,
                                    store: 'notice',
                                    items: [
                                        {
                                            xtype: 'button',
                                            id: 'deletNotice6',
                                            text: '删除',
                                            listeners: {
                                                click: {
                                                    fn: me.deletNotice211,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'datefield',
                                            id: 'findByDateShowNoticeFK',
                                            fieldLabel: '按日期查询',
                                            labelAlign: 'right',
                                            listeners: {
                                                
                                                change: {
                                                    fn: me.onChangeFK,
                                                    scope: me
                                                }
                                            },
                                            labelWidth: 80
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'form',
                            id: 'showNotice',
                            autoScroll: true,
                            bodyPadding: 10,
                            title: '公告',
                            tabConfig: {
                                xtype: 'tab',
                                hidden: true
                            },
                            items: [
                                {
                                    xtype: 'fieldcontainer',
                                    height: 350,
                                    id: 'showAllNotice',
                                    width: 706,
                                    layout: {
                                        type: 'absolute'
                                    },
                                    fieldLabel: 'Label',
                                    hideLabel: true,
                                    items: [
										
                                        {
                                            xtype: 'textfield',
                                            x: -46,
                                            y: 20,
                                            id: 'titleNotice',
                                            width: 740,
                                            fieldLabel: '标题',
                                            labelAlign: 'right',
                                            
                                        },
                                        {
                                            xtype: 'textfield',
                                            x: -46,
                                            y: 60,
                                            id: 'publisherShowNotice',
                                            width: 320,
                                            fieldLabel: '发布者',
                                            labelAlign: 'right',
                                           
                                        },
                                        {
                                            xtype: 'datefield',
                                            x: 410,
                                            y: 60,
                                            id: 'publishTimeShowNotice',
                                            fieldLabel: '发布时间',
                                            labelAlign: 'right',
                                            
                                            altFormats: 'Y-m-d'
                                        },
                                        
                                        {
                                            xtype: 'htmleditor',
                                            x: -45,
                                            y: 100,
                                            height: 199,
                                            id: 'contentShowNotice',
                                            width: 740,
                                            fieldLabel: '内容',
                                            labelAlign: 'right',
                                            
                                        },
                                        {
                                            xtype: 'textfield',
                                            hidden: true,
                                            id: 'noticeID'
                                                                 
                                        },   
                                        {
                                            xtype: 'textfield',
                                            hidden: true,
                                            id: 'noticePath'
                                                                 
                                        },  
                                        {
										    xtype: 'textfield',
										    x: -46,
										    y: 320,
										    id: 'projectIDNotice',
										    width: 740,
										    fieldLabel: '项目编号',
										    labelAlign: 'right',
										    
										},
                                    ]
                                },
                                {
                                    xtype: 'button',
                                    id: 'newSuggestion',
                                    width: 60,
                                    text: '发表意见',
                                    listeners: {
                                        click: {
                                            fn: me.newSuggestion,
                                            scope: me
                                        }
                                    }
                                },
                                {
                                    xtype: 'button',
                                    id: 'downEnclosureFlag',
                                    width: 60,
                                    text: '下载附件',
                                    listeners: {
                                        click: {
                                            fn: me.downEnclosureFlag,
                                            scope: me
                                        }
                                    }
                                },
                                {
                                    xtype: 'button',
                                    width: 60,
                                    text: '返回',
                                    listeners: {
                                        click: {
                                            fn: me.back2,
                                            scope: me
                                        }
                                    }
                                },
                                {
                                    xtype: 'gridpanel',
                                    id: 'showSuggestion',
                                    width: 708,
                                    title: '本公告意见栏',
                                    store: 'showSuggestion',
                                    columns: [
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'samplecotentSuggestion',
                                            width: 306,
                                            dataIndex: 'content',
                                            text: '简要内容'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'publisherSuggestion',
                                            dataIndex: 'publisher ',
                                            text: '发布者'
                                        },
                                        {
                                            xtype: 'datecolumn',
                                            id: 'publishTimeSuggestion',
                                            dataIndex: 'date',
                                            text: '发表时间'
                                        },
                                        {
                                            xtype: 'actioncolumn',
                                            id: 'detailS',
                                            items: [
                                                {
                                                    handler: function(view, rowIndex, colIndex, item, e, record, row) {
                                                    	Ext.getCmp("detailSug").getComponent(0).setValue(record.get("publisher"));
                                                    	Ext.getCmp("detailSug").getComponent(1).setValue(record.get("date"));
                                                    	Ext.getCmp("detailSug").getComponent(2).setValue(record.get("content"));
                                                    	Ext.getCmp("detailSug").getComponent(3).setValue(record.get("projectID"));
                                                    	Ext.getCmp("allNotice").setActiveTab(5);
                                                    },
                                                    icon: 'img/check.png'
                                                }
                                            ]
                                        }
                                    ],
                                    viewConfig: {
                                        id: 'gridviewShowSuggestion'
                                    },
//                                    listeners: {
//                                        itemclick: {
//                                            fn: me.detailSuggestion,
//                                            scope: me
//                                        }
//                                    },
                                    dockedItems: [
                                        {
                                            xtype: 'pagingtoolbar',
                                            dock: 'bottom',
                                            width: 360,
                                            displayInfo: true,
                                            store: 'showSuggestion'
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            xtype: 'panel',
                            height: 451,
                            hidden: true,
                            id: 'detailSuggestion',
                            width: 762,
                            autoScroll: true,
                            layout: {
                                type: 'absolute'
                            },
                            title: '详细意见',
                            items: [
                                {
                                    xtype: 'fieldcontainer',
                                    x: 70,
                                    y: 0,
                                    height: 350,
                                    id: 'detailSug',
                                    width: 599,
                                    layout: {
                                        type: 'absolute'
                                    },
                                    fieldLabel: 'Label',
                                    hideLabel: true,
                                    items: [
                                        {
                                            xtype: 'textfield',
                                            x: -46,
                                            y: 60,
                                            id: 'publisherDetail',
                                            width: 320,
                                            fieldLabel: '发布者',
                                            labelAlign: 'right',
                                            
                                        },
                                        {
                                            xtype: 'datefield',
                                            x: 340,
                                            y: 60,
                                            id: 'publishTimeDetail',
                                            fieldLabel: '发布时间',
                                            labelAlign: 'right',
                                            
                                            altFormats: 'Y-m-d'
                                        },
                                        {
                                            xtype: 'textareafield',
                                            x: -45,
                                            y: 100,
                                            height: 199,
                                            id: 'contentDetail',
                                            width: 630,
                                            fieldLabel: '内容',
                                            labelAlign: 'right',
                                            
                                        },
                                        {
                                            xtype: 'textfield',
                                            x: -46,
                                            y: 320,
                                            id: 'projectIDDetail',
                                            width: 320,
                                            fieldLabel: '项目编号',
                                            labelAlign: 'right',
                                            
                                        },
                                    ]
                                },
                                {
                                    xtype: 'button',
                                    x: 370,
                                    y: 330,
                                    text: '返回',
                                    listeners: {
                                        click: {
                                            fn: me.back,
                                            scope: me
                                        }
                                    }
                                }
                            ]
                        }
                    ]
                },
                
                {
                    xtype: 'form',
                    id: 'newNotice',
                    layout: {
                    	type: 'border',

                    },
                    title: '添加公告',
                    items: [
                        {
                        	xtype: 'panel',
                        	layout: {
                        		type : 'vbox',
                        		padding:'5',
                                align:'stretch'
                            },
   
                            defaults:{margin:'0 0 5 0'},
                        	region: 'west',

                        	items: [
								{
								    xtype:'tbspacer',
								    flex:1
								},
								{
								    xtype: 'textfield',
								    id: 'titleNewNotice',
						
								    fieldLabel: '标题',
								    labelAlign: 'right',
		
								    allowBlank: false,
								    emptyText: '请输入标题'
								},
								{
								    xtype: 'textfield',
								    id: 'projectIDNewNotice',
						
								    fieldLabel: '项目编号',
								    labelAlign: 'right',
		
								    allowBlank: false,
								    emptyText: '请输入项目编号'
								},
								{
								    xtype: 'textfield',
								    id: 'publisherNewNotice',
						
								    fieldLabel: '发布人',
								    labelAlign: 'right',
								    value: name,
								    

								},
								{
								    xtype: 'combobox',
								    id: 'categoryNewNotice',
								    
								    fieldLabel: '公告类型',
								    labelAlign: 'right',
								    allowBlank: false,
								    selectOnFocus: true,
								    editable: false,
								    store: 'ggleixing',

								    valueField: 'id',
								    listeners: {
								        select: {
								            fn: me.onGgleixingSelect,
								            scope: me
								        },
								        afterrender: {
		    	                            fn: me.onAfterrender,
		    	                            scope: me
		    	                        }
								    }
								},
								{
                                    xtype:'tbspacer',
                                    flex:1
                                },
								{
		                            xtype: 'button',
						
		                            text: '提交',
		                            listeners: {
		                                click: {
		                                    fn: me.newNoticeSubmit,
		                                    scope: me
		                                }
		                            }
		                        },
		                        {
		                            xtype: 'button',
						
		                            text: '添加附件',
		                            listeners: {
		                                click: {
		                                    fn: me.addEnclosure,
		                                    scope: me
		                                }
		                            }
		                        },
		                        {
		                            xtype: 'button',
								
		                            text: '取消',
		                            listeners: {
		                                click: {
		                                    fn: me.back1,
		                                    scope: me
		                                }
		                            }
		                        }
                        	]
                        },
                        {
                        	xtype: 'htmleditor',
                            region: 'center',
                            id: 'contentNewNoticeGH',
                        }
                        /*
                        {
                            xtype: 'container',
                            
                            id: 'modle',
                            region: 'center',
                            layout: {
                                type: 'fit'
                            },
                            items: [
                                {
                                    xtype: 'form',
                                    layout: {
                                        type: 'fit'
                                    },
                                    title: '规划方案',
                                    items: [
                                        {
                                            xtype: 'textareafield',
                                            id: 'contentNewNoticeGH',
                                        }
                                    ]
                                },
                                /*
                                {
                                    xtype: 'panel',
                                    layout: {
                                        type: 'fit'
                                    },
                                    title: '复垦方案',
                                    items: [
                                        {
                                            xtype: 'htmleditor',
           
                                            id: 'contentNewNoticeFK',
                                        }
                                    ]
                                },
                           
                                
                                
                            ]
                        },
                        */
                    ]
                },
                {
                	//发表意见 公告栏部分
                    xtype: 'form',
                    id: 'addNewSug',
                    autoScroll: true,
                    layout: {
                        type: 'auto'
                    },
                    bodyPadding: 10,
                    title: '意见及评分',
                    items: [
                        {
                            xtype: 'textfield',
                            id: 'publisherNewSUG',
                            width: 320,
                            fieldLabel: '发布者',
                            value: name,
                            labelWidth: 50,
                            
                        },
                        {
                            xtype: 'fieldset',
                            id: 'sugGH',
                            width: 522,
                            checkboxToggle: true,
                            collapsible: true,
                            title: '规划意见',
                            items: [
                                {
                                    xtype: 'slider',
                                    formBind: true,
                                    id: 'pointGH',
                                    width: 210,
                                    fieldLabel: '对规划评分',
                                    labelAlign: 'top',
                                    value: 1,
                                    checkChangeBuffer: 1,
                                    increment: 1,
                                    maxValue: 5
                                },
                                {
                                    xtype: 'textareafield',
                                    height: 80,
                                    id: 'contentNewSgh',
                                    width: 500,
                                    fieldLabel: '内容',
                                    labelAlign: 'top',
                                    
                                }
                            ]
                        },
                        {
                            xtype: 'fieldset',
                            id: 'sugBC',
                            width: 521,
                            checkboxToggle: true,
                            collapsed: true,
                            collapsible: true,
                            title: '补偿意见',
                            items: [
                                {
                                    xtype: 'slider',
                                    id: 'pointBC',
                                    width: 220,
                                    fieldLabel: '对补偿评分',
                                    labelAlign: 'top',
                                    value: 2,
                                    increment: 1,
                                    maxValue: 5
                                },
                                {
                                    xtype: 'textareafield',
                                    height: 80,
                                    id: 'contentNewSbc',
                                    width: 740,
                                    fieldLabel: '内容',
                                    labelAlign: 'top'
                                }
                            ]
                        },
                        {
                            xtype: 'fieldset',
                            id: 'sugAZ',
                            width: 521,
                            checkboxToggle: true,
                            collapsed: true,
                            collapsible: true,
                            title: '安置意见',
                            items: [
                                {
                                    xtype: 'slider',
                                    id: 'pointAZ',
                                    width: 210,
                                    fieldLabel: '对安置评分',
                                    labelAlign: 'top',
                                    value: 2,
                                    increment: 1,
                                    maxValue: 5
                                },
                                {
                                    xtype: 'textareafield',
                                    height: 80,
                                    id: 'contentNewSaz',
                                    width: 740,
                                    fieldLabel: '内容',
                                    labelAlign: 'top'
                                }
                            ]
                        },
                        {
                            xtype: 'fieldset',
                            id: 'sugFK',
                            width: 523,
                            checkboxToggle: true,
                            collapsed: true,
                            collapsible: true,
                            title: '拆迁意见',
                            items: [
                                {
                                    xtype: 'slider',
                                    id: 'pointFK',
                                    width: 220,
                                    fieldLabel: '对拆迁评分',
                                    labelAlign: 'top',
                                    value: 5,
                                    increment: 1,
                                    maxValue: 5
                                },
                                {
                                    xtype: 'textareafield',
                                    height: 80,
                                    id: 'contentNewSfk',
                                    width: 740,
                                    fieldLabel: '内容',
                                    labelAlign: 'top'
                                }
                            ]
                        },
                        {
                            xtype: 'fieldset',
                            id: 'sugOther',
                            width: 522,
                            checkboxToggle: true,
                            collapsed: true,
                            collapsible: true,
                            title: '其他意见',
                            items: [
                                {
                                    xtype: 'slider',
                                    id: 'pointOther',
                                    width: 220,
                                    fieldLabel: '对补偿评分',
                                    labelAlign: 'top',
                                    value: 2,
                                    increment: 1,
                                    maxValue: 5
                                },
                                {
                                    xtype: 'textareafield',
                                    height: 80,
                                    id: 'contentNewSother',
                                    width: 740,
                                    fieldLabel: '内容',
                                    labelAlign: 'top'
                                }
                            ]
                        },
                        {
                            xtype: 'fieldcontainer',
                            height: 27,
                            width: 400,
                            fieldLabel: 'Label',
                            hideLabel: true,
                            items: [
                                {
                                    xtype: 'button',
                                    margin: '0 100 0 200',
                                    text: '返回',
                                    listeners: {
                                        click: {
                                            fn: me.back3,
                                            scope: me
                                        }
                                    }
                                },
                                {
                                    xtype: 'button',
                                    text: '提交',
                                    listeners: {
                                        click: {
                                            fn: me.submitSUG,
                                            scope: me
                                        }
                                    }
                                }
                            ]
                        }
                    ]
                },
                {
                    xtype: 'panel',
                    height: 407,
                    id: 'showSug',
                    width: 712,
                    layout: {
                        type: 'fit'
                    },
                    title: '查看意见',
                    items: [
                        {
                            xtype: 'gridpanel',
                            id: 'gridviewShowSug',
                            header: false,
                            title: 'My Grid Panel',
                            allowDeselect: true,
                            columnLines: true,
                            emptyText: '没有数据',
                            store: 'suggestion',
                            columns: [
								{
								    xtype: 'gridcolumn',
								    id: 'projectIDSug',
								    dataIndex: 'projectID',
								    text: '项目编号',
								    width: 125,
								},
                                {
                                    xtype: 'numbercolumn',
                                    id: 'pointSug',
                                    dataIndex: 'grade',
                                    text: '评分',
                                    format: '0'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    id: 'publisherSug',
                                    width: 125,
                                    align: 'center',
                                    dataIndex: 'publisher',
                                    text: '发布人'
                                },
                                {
                                    xtype: 'datecolumn',
                                    id: 'publishTimeSug',
                                    align: 'center',
                                    dataIndex: 'date',
                                    text: '发布时间'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    id: 'contentSug',
                                    width: 174,
                                    align: 'center',
                                    dataIndex: 'content',
                                    text: '内容'
                                },
                                {
                                    xtype: 'actioncolumn',
                                    id: 'detailNoticeGH1',
                                    width: 49,
                                    items: [
                                        {
                                            handler: function(view, rowIndex, colIndex, item, e, record, row) {
                                            	Ext.getCmp("detailSug1").getComponent(0).setValue(record.get("publisher"));
                                            	Ext.getCmp("detailSug1").getComponent(1).setValue(record.get("category"));
                                            	Ext.getCmp("detailSug1").getComponent(2).setValue(record.get("date"));
                                            	Ext.getCmp("detailSug1").getComponent(3).setValue(record.get("content"));
                                            	Ext.getCmp("detailSug1").getComponent(4).setValue(record.get("projectID"));
                                            	Ext.getCmp("notice").getLayout().setActiveItem(5);

                                            },
                                            altText: '详细',
                                            icon: 'img/check.png'
                                        }
                                    ]
                                }
                            ],
                            viewConfig: {
                                id: 'gridviewSuggestion',
                                enableTextSelection: true
                            },
                            selModel: Ext.create('Ext.selection.CheckboxModel', {

                            })
                        }
                    ],
                    dockedItems: [
                        {
                            xtype: 'pagingtoolbar',
                            dock: 'top',
                            id: 'toolbarShowNoticeGH1',
                            width: 360,
                            displayInfo: true,
                            displayMsg: ' ',
                            store: 'suggestion',
                            items: [
                                {
                                    xtype: 'button',
                                    id: 'deletNotice1',
                                    text: '删除',
                                    listeners: {
                                        click: {
                                            fn: me.deletNotice1,
                                            scope: me
                                        }
                                    }
                                },
                                {
                                    xtype: 'datefield',
                                    id: 'findByDateShowSuggest',
                                    fieldLabel: '按日期查询',
                                    labelAlign: 'right',
                                    listeners: {
                                        
                                        change: {
                                            fn: me.onChangeSug,
                                            scope: me
                                        }
                                    },
                                    labelWidth: 80
                                }
                            ]
                        }
                    ]
                },
                {
                    xtype: 'panel',
                    id: 'showPoint',
                    layout: {
                        align: 'stretch',
                        pack: 'center',
                        type: 'vbox'
                    },
                    title: '意见统计结果',
                    items: [
                        {
                            xtype: 'chart',
                            height: 250,
                            id: 'chartSUG',
                            width: 400,
                            animate: true,
                            insetPadding: 20,
                            store: 'point',
                            axes: [
                                {
                                    type: 'Category',
                                    fields: [
                                        'category'
                                    ],
                                    title: '类别',
                                    position: 'bottom'
                                },
                                {
                                    type: 'Numeric',
                                    fields: [
                                        'point1'
                                    ],
                                    title: '数量',
                                    position: 'left'
                                }
                            ],
                            series: [
                                {
                                    type: 'column',
                                    label: {
                                 //       display: 'insideEnd',
                                 //       field: 'y',
                                        color: '#333',
                                        'text-anchor': 'middle'
                                    },
                            //        xField: 'pointCategory',
                                    yField: [
                                        'point1',
                                        'point2',
                                        'point3',
                                        'point4',
                                        'point5'
                                    ],
                                    groupGutter: 50
                                }
                            ]
                        }
                    ]
                },
                {
                    xtype: 'panel',
                    height: 451,
                    hidden: true,
                    id: 'detailSuggestion1',
                    width: 762,
                    autoScroll: true,
                    layout: {
                        type: 'absolute'
                    },
                    title: '详细意见',
                    items: [
                        {
                            xtype: 'fieldcontainer',
                            x: 70,
                            y: 0,
                            height: 350,
                            id: 'detailSug1',
                            width: 599,
                            layout: {
                                type: 'absolute'
                            },
                            fieldLabel: 'Label',
                            hideLabel: true,
                            items: [
                                {
                                    xtype: 'textfield',
                                    x: -46,
                                    y: 60,
                                    id: 'publisherDetail1',
                                    width: 320,
                                    fieldLabel: '发布者',
                                    labelAlign: 'right',
                                    
                                },
                                {
                                    xtype: 'textfield',
                                    x: -46,
                                    y: 20,
                                    id: 'categoryDetail1',
                                    width: 320,
                                    fieldLabel: '意见类型',
                                    labelAlign: 'right',
                                    
                                },
                                {
                                    xtype: 'datefield',
                                    x: 340,
                                    y: 60,
                                    id: 'publishTimeDetail1',
                                    fieldLabel: '发布时间',
                                    labelAlign: 'right',
                                    readOnly: true,
                                    altFormats: 'Y-m-d'
                                },
                                {
                                    xtype: 'textareafield',
                                    x: -45,
                                    y: 100,
                                    height: 199,
                                    id: 'contentDetail1',
                                    width: 630,
                                    fieldLabel: '内容',
                                    labelAlign: 'right',
                                    
                                },
                                {
                                    xtype: 'textfield',
                                    x: -46,
                                    y: 320,
                                    id: 'projectIDDetail',
                                    width: 320,
                                    fieldLabel: '项目编号',
                                    labelAlign: 'right',
                                    
                                }
                            ]
                        },
                        {
                            xtype: 'button',
                            x: 370,
                            y: 330,
                            text: '返回',
                            listeners: {
                                click: {
                                    fn: me.back4,
                                    scope: me
                                }
                            }
                        }
                    ]
                }
            ]
        });
        
        me.callParent(arguments);
    },

  //删除公告部分规划
    deletNotice: function(button, e, eOpts) {

    	Ext.Msg.confirm('提示', '确实要删除所选的记录吗?', isOK);
        function isOK(id){
        	//alert('单击的按钮id是：'+id);
        	if (id == 'yes') {
        		if (Ext.getCmp("gridviewShowNoticeGH").getSelectionModel().hasSelection())
				{
        			//alert("进入selete");
					var records=Ext.getCmp("gridviewShowNoticeGH").getSelectionModel().getSelection();
					for(var i=0;i<records.length;i++){
						var id = records[i].get("id");
						  
						  Ext.Ajax.request({
							  url:'deleteNotice.action',
							   method:'post',
							   params:{id :"" + id + ""},
							   success:function(){										   
								   
								   Ext.Msg.alert("删除成功");
								   Ext.Msg.alert("规划");
						           Ext.getCmp("gridviewShowNoticeGH").getStore().load({params:{start: 0, limit: 2, category: "规划方案", date: ""}});
								   
							   }
							   });
					}
				}
        	}
									
        }

    },

    //删除公告补偿
    deletNotice2: function(button, e, eOpts) {

    	Ext.Msg.confirm('提示', '确实要删除所选的记录吗?', isOK);
        function isOK(id){
        if (id == 'yes') {
    		if (Ext.getCmp("gridviewShowNoticeBC").getSelectionModel().hasSelection())
			{
    			//alert("进入selete");
				var records=Ext.getCmp("gridviewShowNoticeBC").getSelectionModel().getSelection();
				for(var i=0;i<records.length;i++){
					var id = records[i].get("id");
					  
					  Ext.Ajax.request({
						  url:'deleteNotice.action',
						   method:'post',
						   params:{id :"" + id + ""},
						   success:function(){										   
							   
							   Ext.Msg.alert("删除成功");
							   Ext.getCmp("gridviewShowNoticeBC").getStore().load({params:{start: 0, limit: 2, category: "补偿方案", date: ""}});
							   
						   }
						   });
				}
			}
    	
								
        }
      }

    },

    //删除公告安置
    deletNotice21: function(button, e, eOpts) {

    	Ext.Msg.confirm('提示', '确实要删除所选的记录吗?', isOK);
        function isOK(id){
        if (id == 'yes') {
    		if (Ext.getCmp("gridviewShowNoticeAZ").getSelectionModel().hasSelection())
			{
    			//alert("进入selete");
				var records=Ext.getCmp("gridviewShowNoticeAZ").getSelectionModel().getSelection();
				for(var i=0;i<records.length;i++){
					var id = records[i].get("id");
					  
					  Ext.Ajax.request({
						  url:'deleteNotice.action',
						   method:'post',
						   params:{id :"" + id + ""},
						   success:function(){										   
							   
							   Ext.Msg.alert("删除成功");
							   Ext.getCmp("gridviewShowNoticeAZ").getStore().load({params:{start: 0, limit: 2, category: "安置方案", date: ""}});
							   
						   }
						   });
				}
			}
        	}
        }

    },

    //删除公告复垦部分
    deletNotice211: function(button, e, eOpts) {

    	Ext.Msg.confirm('提示', '确实要删除所选的记录吗?', isOK);
        function isOK(id){
        if (id == 'yes') {
    		if (Ext.getCmp("gridviewShowNoticeFK").getSelectionModel().hasSelection())
			{
    			//alert("进入selete");
				var records=Ext.getCmp("gridviewShowNoticeFK").getSelectionModel().getSelection();
				for(var i=0;i<records.length;i++){
					var id = records[i].get("id");
					  
					  Ext.Ajax.request({
						  url:'deleteNotice.action',
						   method:'post',
						   params:{id :"" + id + ""},
						   success:function(){										   
							   
							   Ext.Msg.alert("删除成功");
							   Ext.getCmp("gridviewShowNoticeFK").getStore().load({params:{start: 0, limit: 2, category: "拆迁方案", date: ""}});
							   
						   }
						   });
				}
			}
        }
        }

    },
    
    newSuggestion: function(button, e, eOpts) {
        var win = new Ext.Window(  
        {  
            //指定窗口的标题  
            title: "发表意见",  
            //窗口的宽度  

            modal: true,  
            //窗口显示的内容，内容为一个form表单控件，在其他章节有讲到  
            items: [{  
                xtype: "form",  
                id: "addNewSuggestion",          
                borderStyle: "padding-top:3px",  
                frame: true,  
                defaultType: "textfield",  
                labelAlign: "right",  
                labelWidth: 57,  
                defaults: {  
                    allowBlank: false
                },
                items: [

                {
                    xtype: 'textfield',
                    x: -46,
                    y: 60,
                    id: 'addSugPublisher',
                    width: 320,
                    fieldLabel: '发布者',
                    value: name,
                    labelAlign: 'right',
                    
                },
                {
                    xtype: 'slider',
                    x: 450,
                    y: 60,
                    id: 'addSugPoint',
                    fieldLabel: '评分',
                    labelAlign: 'right',
                    width: 210,
                    value: 2, 
                    increment: 1,
                    maxValue: 5

                },
                {
                    xtype: 'textareafield',
                    x: -45,
                    y: 100,
                    height: 199,
                    id: 'addSugContent',
                    width: 740,
                    fieldLabel: '内容',
                    labelAlign: 'right'
                }
                ]

            }],

            //为这个窗口配置按钮，一个确定按钮，一个取消按钮      
            buttons: [  
            {  
                //引用类型为button  
                xtype: "button",  
                //显示的text为“确定”  
                text: "确定" ,
                //响应事件  
                
            	handler: function () {  
                    //验证输入的内容是否合法等，这个是表单的基本操作  
           
                    if (!Ext.getCmp("addNewSuggestion").getForm().isValid()) {  
                        Ext.Msg.alert("提示","您输入的信息有误,请重新输入...");  
                        return false;  
                    }  
                      
                 
                    var jsGrade = Ext.getCmp("addSugPoint").getValue();
            		var jsContent = Ext.getCmp("addSugContent").getValue();
                	
                	var jsPublisher = name;
                	var jsNoticeID = Ext.getCmp("noticeID").getValue();
                	var jsProjectID = Ext.getCmp("projectIDNotice").getValue();
                	
    			
                    Ext.MessageBox.wait("载入中...", "提示", {   
                        interval: 100       //进度条加载速度   
                    });   

                    Ext.Ajax.request({  
                        url: "addSuggest.action",  
                        params: {  
                        	grade : "" + jsGrade + "",
            				content : "" + jsContent + "",
            				publisher : "" + jsPublisher + "",
            				projectID: "" + jsProjectID + "",
            				noticeID : "" + jsNoticeID + "",
            				count : "1",
                        },  
                        success: function (reponse, option) {  
                            //gridStore.reload();  
                            Ext.MessageBox.hide();   
                            Ext.Msg.alert("提示", "添加成功！");   
                              
                            Ext.getCmp("showSuggestion").getStore().load({params:{start: 0, limit: -1,  date: "", 
                            	noticeID: "" + jsNoticeID + ""}}); 

                          //  Ext.getCmp("gridviewShowSug").getStore().reload();
      
                          
                            win.close();
                        },  
                        failure: function () {  
                            Ext.MessageBox.hide();   
                            Ext.Msg.alert("提示", "添加失败！");   
                        }  
                    });  
                }  
        },  
        {  
            xtype: "button",  
            text: "取消",  
            handler: function () {  
                /* Ext.getCmp("yj").setValue("");  */
                win.close();  
            }  
        }  
        ]

    });  
    win.show();  

    },

    back2: function(button, e, eOpts) {
        Ext.getCmp("allNotice").setActiveTab(0);
    },

    detailSuggestion: function(dataview, record, item, index, e, eOpts) {
        Ext.getCmp("allNotice").setActiveTab(5);
    },

    back: function(button, e, eOpts) {
        Ext.getCmp("allNotice").setActiveTab(4);
    },


    newNoticeSubmit: function(button, e, eOpts) {
    	
   
    	var jsTitle = Ext.getCmp("titleNewNotice").getValue();
    	var jsProjectID = Ext.getCmp("projectIDNewNotice").getValue();
		var jsContent = Ext.getCmp("contentNewNoticeGH").getValue();
    	var jsCategory = Ext.getCmp("categoryNewNotice").getRawValue();
    	var jsPublisher = name;
    	var jsFileName = "";
    	if (Ext.getCmp('noticeEnclosure') != undefined) {
    		jsFileName = Ext.getCmp('noticeEnclosure').getComponent(0).getRawValue();
		}
    
    	var jsEnclosureFlag = "无附件";
    	if (jsFileName != "") {
    		jsEnclosureFlag = "有附件";
		}
    	
    	if (Ext.getCmp('noticeEnclosure') != undefined) {
    		Ext.getCmp('noticeEnclosure').getForm().submit({

                method : 'post',
                url :'addNotice.action',// 后台处理的action
                params:{
                	title : "" + jsTitle + "",
    				content : "" + jsContent + "",
    				publisher : "" + jsPublisher + "",
    				category : "" + jsCategory + "",
    				projectID: "" + jsProjectID + "",
                	fileName :"" + "notice" + "",		
                	enclosureFlag: "" + jsEnclosureFlag + ""
                },
                waitMsg : '操作处理中，请稍等...',
                waitTitle:'提示',
                success :function(fp,action){
                	Ext.Msg.show({
                	    title: '结果信息',
                	    msg: '公告添加成功',
                	    width: 300,
                	    buttons: Ext.Msg.OK,
                	    icon: Ext.window.MessageBox.INFO
                	});
                //	document.location='test1/app.jsp';
                //	Ext.Msg.alert("执行之后的");
                	Ext.getCmp("gridviewShowNoticeGH").getStore().reload();
             
                    Ext.getCmp("notice").getLayout().setActiveItem(0);
                //    Ext.getCmp("noticeEnclosureForm").destroy();
                	//document.location='test1/app.jsp';
                },
                failure : function(fp, action) {
                 
                    
                }
            });	
		}else{
			Ext.Ajax.request({
				method : 'post',
                url :'addNotice.action',// 后台处理的action
                params:{
                	title : "" + jsTitle + "",
    				content : "" + jsContent + "",
    				publisher : "" + jsPublisher + "",
    				category : "" + jsCategory + "",
    				projectID: "" + jsProjectID + "",
                	fileName :"" + "notice" + "",		
                	enclosureFlag: "" + jsEnclosureFlag + ""
                },
                waitMsg : '操作处理中，请稍等...',
                waitTitle:'提示',
                success :function(fp,action){
                	Ext.Msg.show({
                	    title: '结果信息',
                	    msg: '公告添加成功',
                	    width: 300,
                	    buttons: Ext.Msg.OK,
                	    icon: Ext.window.MessageBox.INFO
                	});
                //	document.location='test1/app.jsp';
                //	Ext.Msg.alert("执行之后的");
                	Ext.getCmp("gridviewShowNoticeGH").getStore().reload();
             
                    Ext.getCmp("notice").getLayout().setActiveItem(0);
                //    Ext.getCmp("noticeEnclosureForm").destroy();
                	//document.location='test1/app.jsp';
                },
                failure : function(fp, action) {
                 
                    
                }
			})
		}
    	
    	
    	/*
    	alert(Ext.getCmp("contentNewNoticeGH").getValue());
    	switch(jsCategory)
        {
            case "规划方案":
            	{
            	
	            	jsContent = Ext.getCmp("modle").getComponent(0).getComponent(0).getValue();            	
	            	break;
            	}
            case "复垦方案":
            	{
	            	jsContent = Ext.getCmp("modle").getComponent(1).getComponent(0).getValue();
	            	break;
            	}
            case "安置方案":
            	{
	            	jsContent = Ext.getCmp("modle").getComponent(2).getComponent(0).getValue();
	            	break;
            	}
            case "补偿方案":
            	{
	            	jsContent = Ext.getCmp("modle").getComponent(3).getComponent(0).getValue();
	            	break;
            	}
        }
        */
    },

    back1: function(button, e, eOpts) {
        history.back();
    },

    back3: function(button, e, eOpts) {
        back();
    },

    submitSUG: function(button, e, eOpts) {
    	var jsGrade;
		var jsContent;
    	var jsCategory;
    	var jsPublisher = name;
    	var jsCount = 0;
    	var jsNoticeID = 1;
    	
    	first = true;
    	
    	
    	for (i = 1; i < 6; i++) {
    		
    		//获取每个fieldset
    		var field = Ext.getCmp("addNewSug").getComponent(i);
    		
    		if (!field.collapsed) {
    			
    			if (first) {
    				
    				jsCategort = field.title;
    				
  //  				alert(field.getComponent(0).getValue());
    				jsGrade = field.getComponent(0).getValue();
   // 				alert(field.getComponent(1).getValue());
    				jsContent = field.getComponent(1).getValue();
        			first = false;
				}else{
					
					
					jsCategort = jsCategort + "," + field.title;
//					alert(jsCategort);
					jsGrade = jsGrade + "," + field.getComponent(0).getValue();
//					alert(jsGrade);		
					jsContent = jsContent + "#" + field.getComponent(1).getValue();
	//				alert(jsContent);
	    		}   	
    			jsCount = jsCount + 1;
			}
    		
    		
		}

    //	alert(jsCategort);
    	
    	Ext.Ajax.request({
            //设置提交的地址  
            url:'addSuggest.action',  
            //设置提交的方式为post  
            
            params : {
				grade : "" + jsGrade + "",
				content : "" + jsContent + "",
				publisher : "" + jsPublisher + "",
				category : "" + jsCategort + "",
				count : "" + jsCount + "",
				noticeID : "" + jsNoticeID + "",
			},
            method: 'post',  


            //网络成功返回  
            success: function(form, action) {  
            	Ext.Msg.show({
            	    title: '结果信息',
            	    msg: '意见发表成功',
            	    width: 300,
            	    buttons: Ext.Msg.OK,
            	    icon: Ext.window.MessageBox.INFO
            	});
            //	document.location='test1/app.jsp';
            //	Ext.Msg.alert("执行之后的");
            //	Ext.getCmp("showSuggestion").getStore().reload();
            	Ext.getCmp("gridviewShowSug").getStore().reload();
            	
            	
                Ext.getCmp("notice").getLayout().setActiveItem(3);
                
            	//document.location='test1/app.jsp';
            },  
            //网络失败返回  
            failure: function(form, action) {  
               
            }  
        }); 
    },

  //此处是删除意见
    deletNotice1: function(button, e, eOpts) {

    	Ext.Msg.confirm('提示', '确实要删除所选的记录吗?', isOK);
        function isOK(id){
        if (id == 'yes') {
    		if (Ext.getCmp("gridviewShowSug").getSelectionModel().hasSelection())
			{
    			//alert("进入selete");
				var records=Ext.getCmp("gridviewShowSug").getSelectionModel().getSelection();
				for(var i=0;i<records.length;i++){
					var id = records[i].get("id");
					  
					  Ext.Ajax.request({
						  url:'deleteSuggest.action',
						   method:'post',
						   params:{id :"" + id + ""},
						   success:function(){										   
							   
							   Ext.Msg.alert("删除成功");
							   Ext.getCmp("gridviewShowSug").getStore().load({params:{start: 0, limit: 2,  date: "", noticeID : "1"}});
							 
						   }
						   });
				}
			}
        }
        }

    },

    back4: function(button, e, eOpts) {
        Ext.getCmp("notice").getLayout().setActiveItem(3);
    },
  //公告tab切换事件
    onTabpanelTabChange: function(tabPanel, newCard, oldCard, eOpts) {
  	  
    	var activeTitle = Ext.getCmp("allNotice").getActiveTab().title;
    	Ext.getCmp("gridviewShowNoticeGH").getStore().load({params:{start:0,limit:2, category : "" + activeTitle + ""}});
    	Ext.getCmp("findByDateShowNoticeGH").setValue("");
    	Ext.getCmp("findByDateShowNoticeAZ").setValue("");
    	Ext.getCmp("findByDateShowNoticeBC").setValue("");
    	Ext.getCmp("findByDateShowNoticeFK").setValue("");
    	//    	/(Ext.getCmp("allNotice").getActiveTab().getDockedItems('pagingtoolbar[dock="top"]'))[0].cursor = 0;
    },
    
    //按日期查看公告部分
    onChangeGH: function(newValue, oldValue, eOpts)
    {  	
    	var formatDate = Ext.util.Format.date(Ext.getCmp("findByDateShowNoticeGH").getValue(), 'Y-m-d');
    	var activeTitle = Ext.getCmp("allNotice").getActiveTab().title;
    	if (formatDate == "")
    		{
    		Ext.getCmp("gridviewShowNoticeGH").getStore().load({params:{start:0,limit:2, category : "" + activeTitle + ""
    			, date: ""}});
    		}
    	else
    		{
    		Ext.getCmp("gridviewShowNoticeGH").getStore().load({params:{start:0,limit:2, category : "" + activeTitle + ""
    			, date: "" + formatDate + ""}});
//				alert(record.get('date'));
//				var toString = Object.prototype.toString;
				
				//alert(Ext.util.Format.date(Ext.getCmp("findByDateShowNoticeGH").getValue(), 'Y-m-d'));
			    
    		}
    	
    },
    onChangeBC: function(newValue, oldValue, eOpts)
    {  	
    	//alert("进入BC");
    	var formatDate = Ext.util.Format.date(Ext.getCmp("findByDateShowNoticeBC").getValue(), 'Y-m-d');
    	var activeTitle = Ext.getCmp("allNotice").getActiveTab().title;
    	if (formatDate == "")
    		{
    		Ext.getCmp("gridviewShowNoticeBC").getStore().load({params:{start:0,limit:2, category : "" + activeTitle + ""
    			, date: ""}});
    		}
    	else
    		{
    		Ext.getCmp("gridviewShowNoticeBC").getStore().load({params:{start:0,limit:2, category : "" + activeTitle + ""
    			, date: "" + formatDate + ""}});
		    
    		}
    	
    },
    onChangeAZ: function(newValue, oldValue, eOpts)
    {  	
    	//alert("进入AZ");
    	var formatDate = Ext.util.Format.date(Ext.getCmp("findByDateShowNoticeAZ").getValue(), 'Y-m-d');
    	var activeTitle = Ext.getCmp("allNotice").getActiveTab().title;
    	if (formatDate == "")
    		{
    		Ext.getCmp("gridviewShowNoticeAZ").getStore().load({params:{start:0,limit:2, category : "" + activeTitle + ""
    			, date: ""}});
    		}
    	else
    		{
    		Ext.getCmp("gridviewShowNoticeAZ").getStore().load({params:{start:0,limit:2, category : "" + activeTitle + ""
    			, date: "" + formatDate + ""}});
		    
    		}
    	
    },
    onChangeFK: function(newValue, oldValue, eOpts)
    {  	
    	//alert("进入FK");
    	var formatDate = Ext.util.Format.date(Ext.getCmp("findByDateShowNoticeFK").getValue(), 'Y-m-d');
    	var activeTitle = Ext.getCmp("allNotice").getActiveTab().title;
    	if (formatDate == "")
    		{
    		Ext.getCmp("gridviewShowNoticeFK").getStore().load({params:{start:0,limit:2, category : "" + activeTitle + ""
    			, date: ""}});
    		}
    	else
    		{
    		Ext.getCmp("gridviewShowNoticeFK").getStore().load({params:{start:0,limit:2, category : "" + activeTitle + ""
    			, date: "" + formatDate + ""}});
		    
    		}
    	
    },
    //按日期查询意见部分
    onChangeSug: function(newValue, oldValue, eOpts)
    {  	
    	//alert("进入sug");
    	var formatDate = Ext.util.Format.date(Ext.getCmp("findByDateShowSuggest").getValue(), 'Y-m-d');
    	
    	if (formatDate == "")
    		{
    		Ext.getCmp("gridviewShowSug").getStore().load({params:{start:0,limit:2, date: "", noticeID: "1"}});
    		}
    	else
    		{
    		
    		Ext.getCmp("gridviewShowSug").getStore().load({params:{start:0,limit:2, date: "" + formatDate + "", 
    			noticeID: "1"}});
		    
    		}
    	
    },
   
    //下载附件
    downEnclosureFlag: function(){
    	var jsPath = Ext.getCmp("noticePath").getValue();
    	window.location.href = "downNotice.action?path="+jsPath+"";
    },
    
    onAfterrender: function(){
    	Ext.getCmp('categoryNewNotice').on('select', function(combo, records, eOpts) {  	       	
            switch(Ext.getCmp("categoryNewNotice").getRawValue())
            {
            	
                case "规划方案":Ext.getCmp("modle").getLayout().setActiveItem(0);break;
                case "拆迁方案":Ext.getCmp("modle").getLayout().setActiveItem(1);break;
                case "安置方案":Ext.getCmp("modle").getLayout().setActiveItem(2);break;
                case "补偿方案":Ext.getCmp("modle").getLayout().setActiveItem(3);break;

            }
        });
    },
    addEnclosure: function(){
    	var fp = new Ext.FormPanel( {
		       renderTo : Ext.getBody(),
		       fileUpload : true,
		       id: 'noticeEnclosure',
		       width : 523,
		       frame : true,
		       autoHeight : true,
		       bodyStyle : 'padding: 10px 10px 0 10px;',
		       labelWidth : 50,
		       defaults : {
		           anchor : '95%',
		           allowBlank : false,
		           msgTarget : 'side'
		       },
		       items : [
		              new Ext.form.FileUploadField({
		              buttonText: '浏览...',
		              emptyText: '请选择一个文件',
		              name : 'upload',
		              width : 500,
		              buttonCfg: {
		                  width: 40,
		                  iconCls: 'upload-icon'
		              }
		           }) 
		       ],
		       buttons : [ {
		          text : '确定',
		          handler : function() {
		             if (fp.getForm().isValid()) {
		            	
		            	 excelWindow.hide();
		             }
		         }
		     }]
		});
		 
		var excelWindow = new Ext.Window( {
		       renderTo : Ext.getBody(),
		       closeAction : "hide",
//		       id: 'noticeEnclosureForm',
		       plain : true,
		       width : 540,
		       title : " 添加附件",
		       modal : true,
		       items:[fp]
		    });
		excelWindow.show();
    }
});