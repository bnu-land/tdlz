/*
 * File: app/view/sampleDataUpdate.js
 *
 * This file was generated by Sencha Architect version 3.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.sampleDataUpdate', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.sampleDataUpdate',

    requires: [
        'Ext.form.Panel',
        'Ext.form.field.Date',
        'Ext.toolbar.Toolbar',
        'Ext.button.Button'
    ],

    layout: 'fit',
    title: '样点数据编辑',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'form',
                    height: 110,
                    id: 'sampleDataUpdateform',
                    autoScroll: true,
                    layout: 'absolute',
                    bodyPadding: 10,
                    title: '',
                    jsonSubmit: true,
                    standardSubmit: false,
                    url: 'update_sample',
                    items: [
                        {
                            xtype: 'textfield',
                            x: 40,
                            y: 90,
                            fieldLabel: '样品编号',
                            labelWidth: 120,
                            name: 'sampleId'
                        },
                        {
                            xtype: 'textfield',
                            x: 650,
                            y: 160,
                            hidden: true,
                            fieldLabel: 'recordId',
                            labelWidth: 120,
                            name: 'recordId'
                        },
                        {
                            xtype: 'textfield',
                            x: 420,
                            y: 90,
                            width: 240,
                            fieldLabel: '采集地点',
                            name: 'sampleAddresss'
                        },
                        {
                            xtype: 'textfield',
                            x: 40,
                            y: 40,
                            fieldLabel: '项目编号',
                            labelWidth: 120,
                            name: 'projectId'
                        },
                        {
                            xtype: 'textfield',
                            x: 420,
                            y: 40,
                            width: 240,
                            fieldLabel: '项目名称',
                            name: 'projectName'
                        },
                        {
                            xtype: 'textfield',
                            x: 40,
                            y: 140,
                            fieldLabel: '坐标X值',
                            labelWidth: 120,
                            name: 'longitude'
                        },
                        {
                            xtype: 'textfield',
                            x: 420,
                            y: 140,
                            width: 240,
                            fieldLabel: '坐标Y值',
                            name: 'latitude'
                        },
                        {
                            xtype: 'textfield',
                            x: 40,
                            y: 290,
                            fieldLabel: '有机质(g.kg-1)',
                            labelWidth: 120,
                            name: 'organicmatter'
                        },
                        {
                            xtype: 'textfield',
                            x: 40,
                            y: 340,
                            fieldLabel: '土壤质地',
                            labelWidth: 120,
                            name: 'soiltexture'
                        },
                        {
                            xtype: 'textfield',
                            x: 40,
                            y: 390,
                            fieldLabel: '记录人',
                            labelWidth: 120,
                            name: 'recorder'
                        },
                        {
                            xtype: 'textfield',
                            x: 420,
                            y: 340,
                            width: 240,
                            fieldLabel: 'pH值',
                            name: 'phvalue'
                        },
                        {
                            xtype: 'textfield',
                            x: 40,
                            y: 190,
                            fieldLabel: '土层厚度(CM)',
                            labelWidth: 120,
                            name: 'soilThickness'
                        },
                        {
                            xtype: 'textfield',
                            x: 40,
                            y: 240,
                            fieldLabel: '土壤含水量(mm)',
                            labelWidth: 120,
                            name: 'soilmoisture'
                        },
                        {
                            xtype: 'textfield',
                            x: 420,
                            y: 190,
                            width: 240,
                            fieldLabel: '全氮(mg.kg-1)',
                            name: 'totalnitrogen'
                        },
                        {
                            xtype: 'textfield',
                            x: 420,
                            y: 240,
                            width: 240,
                            fieldLabel: '全磷(mg.kg-1)',
                            name: 'totalphosphorus'
                        },
                        {
                            xtype: 'textfield',
                            x: 420,
                            y: 290,
                            width: 240,
                            fieldLabel: '全钾(mg.kg-1)',
                            name: 'totalpotassium'
                        },
                        {
                            xtype: 'datefield',
                            x: 420,
                            y: 390,
                            fieldLabel: '采样时间',
                            name: 'sampletime',
                            format: 'Y-m-d'
                        }
                    ],
                    dockedItems: [
                        {
                            xtype: 'toolbar',
                            x: 73,
                            y: 9,
                            dock: 'top',
                            items: [
                                {
                                    xtype: 'button',
                                    handler: function(button, event) {
                                        var form = this.up('form').getForm(); // get the basic form
                                        if (form.isValid()) { // make sure the form contains valid data before submitting
                                            form.submit({
                                                success: function(form, action) {
                                                    Ext.Msg.alert('Success', action.result.msg);
                                                },
                                                failure: function(form, action) {
                                                    Ext.Msg.alert('Failed', action.result.msg);
                                                }
                                            });
                                        } else { // display error alert if the data is invalid
                                            Ext.Msg.alert('Invalid Data', 'Please correct form errors.');
                                        }
                                    },
                                    icon: 'images/table_save.png ',
                                    text: '保存'
                                },
                                {
                                    xtype: 'button',
                                    handler: function(button, event) {
                                        var tabs = this.up('tabpanel');
                                        tabs.removeAll(true);
                                        //用tabs.add()新增加一个tab页面,通过Ext.widget(xtype)得到文章回收站的页面
                                        var newtab = tabs.add(Ext.widget('sampleDataManage'));
                                    },
                                    icon: 'images/return.png',
                                    text: '返回'
                                }
                            ]
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    }

});