/*
 * File: app/view/preWarm.js
 *
 * This file was generated by Sencha Architect version 2.2.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.preWarm', {
    extend: 'Ext.container.Container',
    alias: 'widget.preWarm',

    id: 'RecWarm',
    autoScroll: true,
    layout: {
        type: 'card'
    },

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'container',
                    id: 'rule',
                    items: [
                        {
                            xtype: 'combobox',
                            id: 'categorySelect',
                            fieldLabel: '选择规则类型',
                            allowBlank: false,
                            displayField: 'nameRule',
                            store: 'categoryRuleYJ',
                            valueField: 'value',
                            value: 1,
                            valueNotFoundText: '未定义预警规则',
                            listeners: {
                                select: {
                                    fn: me.onComboboxSelect,
                                    scope: me
                                }
                            }
                        },
                        {
                            xtype: 'container',
                            height: 500,
                            id: 'categoryRule',
                            layout: {
                                type: 'card'
                            },
                            items: [
                                {
                                    xtype: 'gridpanel',
                                    height: 500,
                                    id: 'ruleCQ',
                                    autoScroll: true,
                                    title: '超期预警规则',
                                    store: 'ruleCQ',
                                    columns: [
										{
										    xtype: 'gridcolumn',
										    id: 'projectIDCQ',
										    dataIndex: 'projectID',
										    text: '项目编号'
										},
                                        {
                                            xtype: 'datecolumn',
                                            id: 'dateCQ',
                                            dataIndex: 'createTime',
                                            text: '设立时间'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'nameCQ',
                                            dataIndex: 'warmTarget',
                                            text: '处理对象'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'contentCQ',
                                            dataIndex: 'warmContent',
                                            text: '预警内容'
                                        },
                                        {
                                            xtype: 'datecolumn',
                                            id: 'endDateCQ',
                                            dataIndex: 'endTime',
                                            text: '截止日期'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            
                                            dataIndex: 'ruleDescription',
                                            text: '规则描述'
                                        },
                                        {                                          
                                            xtype: 'actioncolumn',
                                            height: 0,
                                            text: '修改',
                                            items: [
                                                {
                                                    handler: function(view, rowIndex, colIndex, item, e, record, row) {
                                                    	var jsID = record.get('id');
                                                    	var warmModify = Ext.create('Ext.form.Panel', {
    	                                            		height: 281,
    	                                            		
    	                                                    autoScroll: true,
    	                                                    bodyPadding: 10,
    	                                                    title: '超期预警规则',
    	                                                    items: [
																{
																    xtype: 'textfield',
																    anchor: '100%',								                                           
																    fieldLabel: '项目编号',
																    name: 'projectID',
																},
    	                                						{
						                                            xtype: 'datefield',
						                                            anchor: '100%',								                                           
						                                            fieldLabel: '设立时间',
						                                            editable: false,
						                                            name: 'createTime',
						                                            value: new Date(),
						                                            format : 'Y-m-d',
						                                        },
    	                                                        {
    	                                                            xtype: 'combobox',
    	                                                            
    	                                                            store: new Ext.data.ArrayStore({
    	                                                            	fields: ['value', 'text'],
    	                                                            	data: [
    	                                                            //	    ['1', '安置'],
    	                                                            	    ['2', '补偿'],
    	                                                            //	    ['3', '拆迁'],
    	                                                            //	    ['4', '项目']
    	                                                            	],
    	                                                            }),
    	                                                            mode: 'local',
    	                                                            valueField: 'value',
    	                                                            editable: false,
    	                                                            displayField: 'text',           	           
    	                                                            anchor: '100%',
    	                                                            fieldLabel: '处理对象',
    	                                                            name: 'warmTarget',
    	                                                            listeners: {
    	                                                                select: {
    	                                                                    fn: function(combo, records, eOpts) {
    	                                                                    	var value = combo.getValue();
    	                                                                    	
    	                                                                    	switch (value) {
																				case '1':
																					warmModify.getComponent(3).clearValue( );
																					
																					warmModify.getComponent(3).store.proxy.data = [
																					      ['1', '去向证明上传情况'],																		     
																					];
																					warmModify.getComponent(3).store.reload();
																					break;
																				case '2':
																					warmModify.getComponent(3).clearValue( );
																					
																					warmModify.getComponent(3).store.proxy.data = [
																						 ['2', '第一次补偿到位情况'],
																						 ['3', '第二次补偿到位情况'],		     
																					];
																					warmModify.getComponent(3).store.reload();
																					break;																						
																				case '3':
																					warmModify.getComponent(3).clearValue( );
																					warmModify.getComponent(3).store.proxy.data = [
																						 ['4', '房屋拆迁进展情况'],
																						 	     
																					];
																					warmModify.getComponent(3).store.reload();
																					break;
																				case '4':
																					warmModify.getComponent(3).clearValue( );
																					warmModify.getComponent(3).store.proxy.data = [
																						 ['5', '项目进展情况'],
																						 	     
																					];
																					warmModify.getComponent(3).store.reload();
																					break;																								break;

																				default:
																					break;
																				}
    	                                                                    	
    	                                                                    }
    	                                                                }
    	                                                            }
    	                                                        },
    	                                                        {
    	                                                            xtype: 'combobox',
    	                                                            store: new Ext.data.ArrayStore({
    	                                                            	fields: ['value', 'text'],
    	                                                            	data: [

    	                                                            	],
    	                                                            }),
    	                                                            mode: 'local',
    	                                                            valueField: 'value',
    	                                                            editable: false,
    	                                                            displayField: 'text',
    	                                                            name: 'warmContent',
    	                                                            anchor: '100%',
    	                                                            fieldLabel: '预警内容',
    	                                                           
    	                                                        },
    	                                                        {
						                                            xtype: 'datefield',
						                                            anchor: '100%',								                                           
						                                            fieldLabel: '截止时间',
						                                            value: new Date(),
						                                            name: 'endTime',
						                                            format : 'Y-m-d',
						                                            editable: false,
						                                        },
						                                        {
						                                            xtype: 'textareafield',
						                                            anchor: '100%',								                                           
						                                            fieldLabel: '规则描述',
						                                            name: 'ruleDescription',
						                                        },
						                                        {
    	                                                            xtype: 'button',
    	                                                            text: '确认修改',
    	                                                            handler: function(){
    	                                                            	var jsProjectID = warmModify.getComponent(0).getValue();
    	                                                            	var jsCreateTime = Ext.util.Format.date(warmModify.getComponent(1).getValue(), 'Y-m-d');
    	                                                            	var jsWarmTarget = warmModify.getComponent(2).getRawValue();
    	                                                            	var jsWarmTargetID = warmModify.getComponent(2).getValue();
    	                                                            	var jsWarmContent = warmModify.getComponent(3).getRawValue();
    	                                                            	var jsWarmContentID = warmModify.getComponent(3).getValue();
    	                                                            	var jsEndTime = Ext.util.Format.date(warmModify.getComponent(4).getValue(), 'Y-m-d');
    	                                                            	var jsDescriptin = warmModify.getComponent(5).getValue();
    	                                                            	var jsWarmCategory = Ext.getCmp('categorySelect').getRawValue();
    	                                                            	var jsWarmCategoryID = Ext.getCmp('categorySelect').getValue();
    	                                                            	Ext.Ajax.request({
    	                                                                    //设置提交的地址  
    	                                                                    url:'modifyWarmRules.action',  
    	                                                                    //设置提交的方式为post  
    	                                                                    
    	                                                                    params : {
    	                                                                    	id: "" + jsID + "",
    	                                                                    	projectID: "" + jsProjectID + "",
    	                                                        				createTime : "" + jsCreateTime + "",
    	                                                        				warmTarget : "" + jsWarmTarget + "",
    	                                                        				warmContent : "" + jsWarmContent + "",
    	                                                        				endTime : "" + jsEndTime + "",
    	                                                        				ruleDescription : "" + jsDescriptin + "",
    	                                                        				cycleTime : "" + "0" + "",
    	                                                        				warmCategory: "" + jsWarmCategory + "",
    	                                                        				warmTargetID : "" + jsWarmTargetID + "",
    	                                                        				warmContentID : "" + jsWarmContentID + "",
    	                                                        				warmCategoryID : "" + jsWarmCategoryID + ""
    	                                                        			},
    	                                                                    method: 'post',  


    	                                                                    //网络成功返回  
    	                                                                    success: function(form, action) {  
    	                                                                    	Ext.Msg.show({
    	                                                                    	    title: '结果信息',
    	                                                                    	    msg: '修改成功',
    	                                                                    	    width: 300,
    	                                                                    	    buttons: Ext.Msg.OK,
    	                                                                    	    icon: Ext.window.MessageBox.INFO
    	                                                                    	});
    	                                                                    
    	                                                                    	Ext.getCmp("ruleCQ").getStore().reload();
    	                                                                    	
    	                                                           	
    	                                                                    	warmWindow.destroy();
    	                                                                        
    	                                                                    	
    	                                                                    },  
    	                                                                    //网络失败返回  
    	                                                                    failure: function(form, action) {  
    	                                                                       
    	                                                                    }  
    	                                                                }); 
    	                                                            	
    	                                                            	
    	                          								    },
    	                                                        },
    	                                                        {
    	                                                            xtype: 'button',
    	                                                            text: '返回',
    	                                                            handler: function(){
    	                                                            	warmWindow.destroy();
    	                          								    },
    	                                                        }
    	                                                     ]
    	                                            	});
                                                    	
                                                    	var warmWindow = Ext.create('Ext.window.Window',{
    	                                    	    		title: '修改规则窗口',
    	                                    	    		width: 400,
    	                                    	    		constrain: true,
    	                                    	    		height: 300,
    	                                    	    		layout: {
    	                                    	    			type: 'fit',
    	                                    	    		},
    	                                 
    	                                    	    		items: [
    	                                    	    		                                        						 
    	                                    	    		]
    	                                    	    		 
    	                                            	});
                                                    	warmModify.loadRecord(record);
                                                    	warmWindow.add(warmModify);
                                                    	warmWindow.show();
                                                    },
                                                    icon: 'img/check.png'
                                                }
                                            ]
                                                
                                        },
                                        {
                                            
                                            xtype: 'actioncolumn',
                                            height: 0,
                                            text: '删除',
                                            handler: function(view, rowIndex, colIndex, item, e, record, row) {
                                                Ext.Ajax.request({
                                                	url: 'removeWarmRules.action',
                                                	method: 'post',
                                                	params: {
                                                		id: "" + record.get('id') + "",
                                                	},
                                                	success: function(){
                                                		Ext.Msg.alert("提示", "删除成功!");
                                                		Ext.getCmp("ruleCQ").getStore().reload();
                                                	}
                                                })
                                            },
                                            items: [
                                                {
                                                    icon: 'img/check.png'
                                                }
                                            ]
                                        }
                                                
                                    ],
                                    dockedItems: [
                                        {
                                            xtype: 'pagingtoolbar',
                                            dock: 'top',
                                            width: 360,
                                            displayInfo: true,
                                            store: 'ruleCQ',
                                            items: [
                                                {
                                                    xtype: 'buttongroup',
                                                    header: false,
                                                    title: 'Buttons',
                                                    columns: 2,
                                                    items: [
                                                        {
                                                            xtype: 'button',
                                                            text: '新建规则',
                                                            handler: function(){
                                                            	warnRuleForm = Ext.create('Ext.form.Panel', {
            	                                            		height: 281,
            	                                            		
            	                                                    autoScroll: true,
            	                                                    bodyPadding: 10,
            	                                                    title: '超期预警规则',
            	                                                    items: [
																		{
																		    xtype: 'textfield',
																		    anchor: '100%',								                                           
																		    fieldLabel: '项目编号',
																		},
            	                                						{
								                                            xtype: 'datefield',
								                                            anchor: '100%',								                                           
								                                            fieldLabel: '设立时间',
								                                            editable: false,
								                                            value: new Date(),
								                                            format : 'Y-m-d',
								                                        },
            	                                                        {
            	                                                            xtype: 'combobox',
            	                                                            store: new Ext.data.ArrayStore({
            	                                                            	fields: ['value', 'text'],
            	                                                            	data: [
            	                                                            //	    ['1', '安置'],
            	                                                            	    ['2', '补偿'],
            	                                                            //	    ['3', '拆迁'],
            	                                                            //	    ['4', '项目']
            	                                                            	],
            	                                                            }),
            	                                                            mode: 'local',
            	                                                            valueField: 'value',
            	                                                            editable: false,
            	                                                            displayField: 'text',           	           
            	                                                            anchor: '100%',
            	                                                            fieldLabel: '处理对象',
            	                                                            listeners: {
            	                                                                select: {
            	                                                                    fn: function(combo, records, eOpts) {
            	                                                                    	var value = combo.getValue();
            	                                                                    	
            	                                                                    	switch (value) {
																						case '1':
																							warnRuleForm.getComponent(3).clearValue( );
																							
																							warnRuleForm.getComponent(3).store.proxy.data = [
																							      ['1', '去向证明上传情况'],																		     
																							];
																							warnRuleForm.getComponent(3).store.reload();
																							break;
																						case '2':
																							warnRuleForm.getComponent(3).clearValue( );
																							
																							warnRuleForm.getComponent(3).store.proxy.data = [
																								 ['2', '第一次补偿到位情况'],
																								 ['3', '第二次补偿到位情况'],		     
																							];
																							warnRuleForm.getComponent(3).store.reload();
																							break;																						
																						case '3':
																							warnRuleForm.getComponent(3).clearValue( );
																							warnRuleForm.getComponent(3).store.proxy.data = [
																								 ['4', '房屋拆迁进展情况'],
																								 	     
																							];
																							warnRuleForm.getComponent(3).store.reload();
																							break;
																						case '4':
																							warnRuleForm.getComponent(3).clearValue( );
																							warnRuleForm.getComponent(3).store.proxy.data = [
																								 ['5', '项目进展情况'],
																								 	     
																							];
																							warnRuleForm.getComponent(3).store.reload();
																							break;																								break;

																						default:
																							break;
																						}
            	                                                                    	
            	                                                                    }
            	                                                                }
            	                                                            }
            	                                                        },
            	                                                        {
            	                                                            xtype: 'combobox',
            	                                                            store: new Ext.data.ArrayStore({
            	                                                            	fields: ['value', 'text'],
            	                                                            	data: [

            	                                                            	],
            	                                                            }),
            	                                                            mode: 'local',
            	                                                            valueField: 'value',
            	                                                            editable: false,
            	                                                            displayField: 'text',
            	                                                            anchor: '100%',
            	                                                            fieldLabel: '预警内容',
            	                                                           
            	                                                        },
            	                                                        {
								                                            xtype: 'datefield',
								                                            anchor: '100%',								                                           
								                                            fieldLabel: '截止时间',
								                                            value: new Date(),
								                                            format : 'Y-m-d',
								                                            editable: false,
								                                        },
								                                        {
								                                            xtype: 'textareafield',
								                                            anchor: '100%',								                                           
								                                            fieldLabel: '规则描述',
								                                            
								                                        },
								                                        {
            	                                                            xtype: 'button',
            	                                                            text: '创建',
            	                                                            handler: function(){
            	                                                            	var jsProjectID = warnRuleForm.getComponent(0).getValue();
            	                                                            	var jsCreateTime = Ext.util.Format.date(warnRuleForm.getComponent(1).getValue(), 'Y-m-d');
            	                                                            	var jsWarmTarget = warnRuleForm.getComponent(2).getRawValue();
            	                                                            	var jsWarmTargetID = warnRuleForm.getComponent(2).getValue();
            	                                                            	var jsWarmContent = warnRuleForm.getComponent(3).getRawValue();
            	                                                            	var jsWarmContentID = warnRuleForm.getComponent(3).getValue();
            	                                                            	var jsEndTime = Ext.util.Format.date(warnRuleForm.getComponent(4).getValue(), 'Y-m-d');
            	                                                            	var jsDescriptin = warnRuleForm.getComponent(5).getValue();
            	                                                            	var jsWarmCategory = Ext.getCmp('categorySelect').getRawValue();
            	                                                            	var jsWarmCategoryID = Ext.getCmp('categorySelect').getValue();
            	                                                            	Ext.Ajax.request({
            	                                                                    //设置提交的地址  
            	                                                                    url:'addWarmRules.action',  
            	                                                                    //设置提交的方式为post  
            	                                                                    
            	                                                                    params : {
            	                                                                    	projectID: "" + jsProjectID + "",
            	                                                        				createTime : "" + jsCreateTime + "",
            	                                                        				warmTarget : "" + jsWarmTarget + "",
            	                                                        				warmContent : "" + jsWarmContent + "",
            	                                                        				endTime : "" + jsEndTime + "",
            	                                                        				ruleDescription : "" + jsDescriptin + "",
            	                                                        				cycleTime : "" + "0" + "",
            	                                                        				warmCategory: "" + jsWarmCategory + "",
            	                                                        				warmTargetID : "" + jsWarmTargetID + "",
            	                                                        				warmContentID : "" + jsWarmContentID + "",
            	                                                        				warmCategoryID : "" + jsWarmCategoryID + ""
            	                                                        			},
            	                                                                    method: 'post',  


            	                                                                    //网络成功返回  
            	                                                                    success: function(form, action) {  
            	                                                                    	Ext.Msg.show({
            	                                                                    	    title: '结果信息',
            	                                                                    	    msg: '添加成功',
            	                                                                    	    width: 300,
            	                                                                    	    buttons: Ext.Msg.OK,
            	                                                                    	    icon: Ext.window.MessageBox.INFO
            	                                                                    	});
            	                                                                    
            	                                                                    	Ext.getCmp("ruleCQ").getStore().reload();
            	                                                                    	
            	                                                           	
            	                                                                    	warnRuleWindow.destroy();
            	                                                                        
            	                                                                    	
            	                                                                    },  
            	                                                                    //网络失败返回  
            	                                                                    failure: function(form, action) {  
            	                                                                       
            	                                                                    }  
            	                                                                }); 
            	                                                            	
            	                                                            	
            	                          								    },
            	                                                        },
            	                                                        {
            	                                                            xtype: 'button',
            	                                                            text: '返回',
            	                                                            handler: function(){
            	                                                            	warnRuleWindow.destroy();
            	                          								    },
            	                                                        }
            	                                                     ]
            	                                            	});
                                                            	
                                                            	var warnRuleWindow = Ext.create('Ext.window.Window',{
            	                                    	    		title: '创建规则窗口',
            	                                    	    		width: 400,
            	                                    	    		constrain: true,
            	                                    	    		height: 300,
            	                                    	    		layout: {
            	                                    	    			type: 'fit',
            	                                    	    		},
            	                                 
            	                                    	    		items: [
            	                                    	    		                                        						 
            	                                    	    		]
            	                                    	    		 
            	                                            	});
                                                            	warnRuleWindow.add(warnRuleForm);
                                                            	warnRuleWindow.show();
                                                            }
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    xtype: 'gridpanel',
                                    id: 'ruleZQ',
                                    title: '周期预警规则',
                                    store: 'ruleZQ',
                                    columns: [
                                        {
                                            xtype: 'datecolumn',
                                            id: 'dateZQ',
                                            dataIndex: 'iniTime',
                                            text: '创建时间'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            id: 'nameZQ',
                                            dataIndex: 'nameRule',
                                            text: '名称'
                                        },
                                        {
                                            xtype: 'numbercolumn',
                                            id: 'periodZQ',
                                            dataIndex: 'period',
                                            text: '预警周期（天）'
                                        },
                                        {
                                            xtype: 'datecolumn',
                                            id: 'nextDate',
                                            dataIndex: 'nextDate',
                                            text: '下次执行日期'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            dataIndex: 'date',
                                            text: '修改',
                                            columns: [
                                                {
                                                    xtype: 'actioncolumn',
                                                    height: 0,
                                                    items: [
                                                        {
                                                            handler: function(view, rowIndex, colIndex, item, e, record, row) {
                                                                Ext.getCmp("categoryRule").getLayout().setActiveItem(4);
                                                            },
                                                            icon: 'img/check.png'
                                                        }
                                                    ]
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            dataIndex: 'bool',
                                            text: '删除',
                                            columns: [
                                                {
                                                    xtype: 'actioncolumn',
                                                    height: 0,
                                                    items: [
                                                        {
                                                            icon: 'img/check.png'
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ],
                                    dockedItems: [
                                        {
                                            xtype: 'pagingtoolbar',
                                            dock: 'top',
                                            width: 360,
                                            displayInfo: true,
                                            store: 'ruleCQ',
                                            items: [
                                                {
                                                    xtype: 'buttongroup',
                                                    header: false,
                                                    title: 'Buttons',
                                                    columns: 2
                                                }
                                            ]
                                        }
                                    ]
                                },
                                
                               
                            ]
                        }
                    ]
                },
                {
                    xtype: 'container',
                    id: 'warmResult',
                    layout: {
                    	type: 'fit',
                    },
                    items: [                       
                        {
                            xtype: 'gridpanel',
                            id: 'resultGrid',
                            title: '日志管理',
                            store: 'result',
                            columns: [
								{
								    xtype: 'gridcolumn',
								    dataIndex: 'projectID',
								    text: '项目编号'
								},
								{
								    xtype: 'gridcolumn',
								    dataIndex: 'warmTarget',
								    text: '预警对象'
								},
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'warmTarget',
                                    text: '预警对象'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'warmContent',
                                    text: '预警内容'
                                },
                                {
                                    xtype: 'datecolumn',
                                    dataIndex: 'warmTime',
                                    text: '预警时间'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'logsFlag',
                                    text: '日志状态'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    dataIndex: 'solveWay',
                                    text: '处理办法'
                                },
                                {
                                    xtype: 'datecolumn',
                                    dataIndex: 'solveTime',
                                    text: '处理时间'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    text: '标记日志',
                                    columns: [
                                        {
                                            xtype: 'actioncolumn',
                                            height: 0,
                                            handler: function(view, rowIndex, colIndex, item, e, record, row){
                                            	var jsID = record.get('id');
                                            	var jsSolveWay;
                                            	
                                            	Ext.Msg.prompt("标记日志","处理办法是",function(button,text){ 
                                                    if(button=="ok"){ 
                                                    	jsSolveWay = text;
                                                    	Ext.Ajax.request({
                                                    		url: 'modifyWarmLogs.action',
                                                    		method: 'post',
                                                    		params: {
                                                    			id: "" + jsID + "",
                                                    			solveWay: "" + jsSolveWay + ""
                                                    		},
                                                    		success: function(){
                                                    			Ext.Msg.alert("提示", "标记成功");
                                                    			Ext.getCmp('resultGrid').getStore().reload();
                                                    		}
                                                    	});
                                                    }
                                            	});
                                                    	
                                            	
                                            },
                                            items: [
                                                {
                                                	icon: 'img/check.png'
                                                }
                                            ],
                                            
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    },

    onComboboxSelect: function(combo, records, eOpts) {
        switch(Ext.getCmp("categorySelect").getRawValue())
        {
            case "超期预警":Ext.getCmp("categoryRule").getLayout().setActiveItem(0);break;
            case "周期预警":Ext.getCmp("categoryRule").getLayout().setActiveItem(1);break;


        }
    },

    onButtonClick: function(button, e, eOpts) {
        Ext.getCmp("categoryRule").getLayout().setActiveItem(0);
    },

    onButtonClickback: function(button, e, eOpts) {
        Ext.getCmp("categoryRule").getLayout().setActiveItem(0);
    }

});