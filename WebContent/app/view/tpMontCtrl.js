/*
 * File: app/view/tpMontCtrl.js
 *
 * This file was generated by Sencha Architect version 2.2.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.tpMontCtrl', {
    extend: 'Ext.tree.Panel',
    alias: 'widget.mytreepanel5',

    id: 'tpMontCtrl',
    title: '监控检测',
    store: 'treestoreMontCtrl',
    rootVisible: false,

    initComponent: function() {
        var me = this;
        warnFlag = true;
        Ext.applyIf(me, {
            viewConfig: {
                listeners: {
                    itemclick: {
                        fn: me.onViewItemClick,
                        scope: me
                    }
                }
            }
        });

        me.callParent(arguments);
    },

    onViewItemClick: function(dataview, record, item, index, e, eOpts) {
        Ext.getCmp("body").getLayout().setActiveItem(6);
        switch(record.raw.id)
        {
            case 701:
            	jswCardStore = Ext.create('Ext.data.Store', {
            		id: 'CardStord',
            	    proxy: {
            	        // load using HTTP
            	        type: 'ajax',
            	        url: 'showCard.action',  
            	        // the return will be XML, so lets set up a reader
            	        reader:{
                			type:"json",
                			root:"results",
                			totalProperty :'totalCount'		
                		},
                		actionMethods: {  
                            read: 'POST'  
                        },
                		writer:{
                			type:"json"
                		}
            	    },
                    fields: [
                        {name: 'projectID',  type: 'string'},  
        		        {name: 'houseNumber',  type: 'string'},  
        		        {name: 'demolitionFlag',  type: 'string'},
        		        {name: 'DLMC',  type: 'string'},
        		        {name: 'DYNHSFZ',  type: 'string'},
        		        {name: 'DYNHXM',  type: 'string'},
        		        {name: 'FWJG',  type: 'string'},
        		        {name: 'FWSYSJ',  type: 'string'},
        		        {name: 'QSDWMC',  type: 'string'},
        		        {name: 'SFDYXZSJ',  type: 'string'},
        		        {name: 'FWZP',  type: 'string'},
        		        {name: 'joinFlag',  type: 'string'},
        		        {name: 'shape_Area',  type: 'auto'},
        		        
                 	]   	    
            	});

            	jswCardStore.load({
            		callback: function(records, options, success){    
            			
			        	Ext.getCmp("MontCtrl").getLayout().setActiveItem(0);
			        	
			        	if(document.getElementById("jsMontMap")){
			        		var e = document.getElementById("jsMontMap"); 
			        		e.parentNode.removeChild(e);
			        		var head = document.getElementsByTagName('head')[0]; 
				            var script= document.createElement("script"); 
				            script.id = "jsMontMap";
				            script.type = "text/javascript"; 
				            script.src="MyMap/WarmMap.js"; 
				            head.appendChild(script);
						}else{
							var head = document.getElementsByTagName('head')[0]; 
				            var script= document.createElement("script"); 
				            script.id = "jsMontMap";
				            script.type = "text/javascript"; 
				            script.src="MyMap/WarmMap.js"; 
				            head.appendChild(script);
						}
			        	
            		}
            	});
            	
            break;
            case 702:Ext.getCmp("MontCtrl").getLayout().setActiveItem(1);break;
            case 703:
            	Ext.getStore('montAZ').load({params:{start:0,limit:2, categoryAZ : "安置监测"}});
            	Ext.getCmp("allMontAZ").setActiveTab(0);
            	Ext.getCmp("MontCtrl").getLayout().setActiveItem(2);break;
            case 704:Ext.getCmp("MontCtrl").getLayout().setActiveItem(3);break;
            case 705:Ext.getCmp("MontCtrl").getLayout().setActiveItem(4);break;

        }
    }

});