/*
 * File: app/view/efctEvlu.js
 *
 * This file was generated by Sencha Architect version 2.2.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.efctEvlu', {
    extend: 'Ext.container.Container',
    alias: 'widget.efctEvlu',
    requires: [
               'Ext.form.Panel',
               'Ext.form.Label',
               'Ext.ProgressBar',
               'Ext.button.Button',
               'Ext.form.field.ComboBox'
           ],
           
    id: 'EfctEvlu',
    layout: {
        type: 'card'
    },

    initComponent: function() {
    	var jsEvluStore;
    	var jsWeightOne;
    	var jsWeightTwo;
    	var jsWeightThree;
        var me = this;
        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'container',
                    id: 'ctnCpltReport',
                    layout: 'border',
                    items: [
                        {
                            xtype: 'panel',
                            region: 'center',
                            id: 'pnlCpltReportMap',
                            layout: 'fit',
                            title: '竣工图',
                            html:  '<div id="finalMap" class="finalMapClass" style="width:100%;height:100%"></div>',
                        },
                        {
                            xtype: 'panel',
                            region: 'east',
                            html: '<div>\r\n<form enctype="multipart/form-data" method="post" id="uploadForm1">\r\n<div class="field">\r\n<label class="file-upload">    \r\n<span><strong>上传规划图<strong></span>\r\n<input type="file" name="file" id="inFile1" />\r\n</label>\r\n<span class="file-upload-status" style="opacity:1;" id="upload-status1" ></span>\r\n</div>\r\n</form>\r\n</div> <div>\r\n<form enctype="multipart/form-data" method="post" id="uploadForm2">\r\n<div class="field">\r\n<label class="file-upload">    \r\n<span><strong>上传拆迁图<strong></span>\r\n<input type="file" name="file" id="inFile2" />\r\n</label>\r\n<span class="file-upload-status" style="opacity:1;" id="upload-status2" ></span>\r\n</div>\r\n</form>\r\n</div>',
                            id: 'pnlCpltReportSubmit',
                            width: 150,
                            collapsed: true,
                            collapsible: true,
                            title: '提交',
                            items:[
                                   {
                                       xtype: 'button',
                                       handler: function(button, e) {
                                    	   jsEvluStore = Ext.create('Ext.data.ArrayStore', {
                                    		   
                                       		   proxy:{                                      			   
                                       			   type:"ajax",
                                       			   url:"finalEvaluation.action",
                                       			   
                                       			   
                                       			   reader:{
                                       				   type:"json",
                                       				   root:"results",
                                       				   totalProperty :'totalCount'		
                                       			   },
                                       			   actionMethods: {  
                                       				   read: 'POST'  
                                       			   },
                                       			   writer:{
                                       				   type:"json"
                                       			   }
                                       		   },
                                		       fields: [  	
                                		          
                                		          {name: 'peopleNumber', type: 'string'},
                                		          {name: 'suggestionNumber', type: 'string'},
                                		          {name: 'houseNumber', type: 'string'},
                                		          {name: 'logNumber', type: 'string'},
                                		          {name: 'warmNumber', type: 'string'},
                                		          {name: 'maxPointBC', type: 'string'},
                                		          {name: 'minPointBC', type: 'string'},
                                		          {name: 'avgPointBC', type: 'string'},
                                		          {name: 'maxPointAZ', type: 'string'},
                                		          {name: 'minPointAZ', type: 'string'},
                                		          {name: 'avgPointAZ', type: 'string'},
                                		          {name: 'maxPointCQ', type: 'string'},
                                		          {name: 'minPointCQ', type: 'string'},
                                		          {name: 'avgPointCQ', type: 'string'},
                                		          {name: 'maxPointQT', type: 'string'},
                                		          {name: 'minPointQT', type: 'string'},
                                		          {name: 'avgPointQT', type: 'string'},
                                		          {name: 'maxPointGZ', type: 'string'},
                                		          {name: 'minPointGZ', type: 'string'},
                                		          {name: 'avgPointGZ', type: 'string'},
                                		          {name: 'maxPointXZ', type: 'string'},
                                		          {name: 'minPointXZ', type: 'string'},
                                		          {name: 'avgPointXZ', type: 'string'},
                                		          {name: 'maxPointGT', type: 'string'},
                                		          {name: 'minPointGT', type: 'string'},
                                		          {name: 'avgPointGT', type: 'string'},
                                		          {name: 'maxPointNH', type: 'string'},
                                		          {name: 'minPointNH', type: 'string'},
                                		          {name: 'avgPointNH', type: 'string'},
                                		          {name: 'warmFrequency', type: 'string'},
                                		          {name: 'fastSolve', type: 'string'},
                                		          {name: 'slowSolve', type: 'string'},
                                		          {name: 'avgSolve', type: 'string'},
                                		          {name: 'totalPointYJ', type: 'string'},
                                		          {name: 'totalPointCQ', type: 'string'},
                                		          {name: 'totalPointWarm', type: 'string'},
                                		       ],  
                                    	   });
                                    	   var jsEvaluteProjectID = Ext.getCmp('evluProjecID').getValue();
                                    	   jsEvluStore.load({params: {projectID: "" + jsEvaluteProjectID + ""},
                                    			   callback: function(){
                                    		
                                    		   Ext.getCmp("EfctEvlu").getLayout().setActiveItem(1); 
                                    	   }});
                                    	   
                                       },
                                       x: 30,
                                       y: 160,
                                       height: 30,
                                       id: 'btnEvluNext',
                                       width: 80,
                                       text: '下一步'
                                   },
                                   ]
                        }
                    ]
                },
                {
                    xtype: 'container',
                    activeItem: 1,
                    id: 'ctnEfctEvlu',
                    layout: 'card',
                    items: [
                        {
                            xtype: 'form',
                            id: 'fpnlEvluProgress',
                            width: 150,
                            layout: 'absolute',
                            title: '评估进度',
                            items: [
                                {
                                    xtype: 'label',
                                    x: 500,
                                    y: 80,
                                    height: 80,
                                    id: 'lblEvluProgress',
                                    style: {
                                        fontSize: '40px',
                                        fontFamily: '幼圆'
                                    },
                                    width: 400,
                                    text: '规划—拆迁效果评估'
                                },
                                {
                                    xtype: 'progressbar',
                                    x: 490,
                                    y: 230,
                                    height: 40,
                                    id: 'pbEvlu',
                                    width: 390,
                                    value: 0.4
                                },
                                {
                                    xtype: 'button',
                                    handler: function(button, e) {
                                        Ext.TaskManager.stopAll();
                                        Ext.getCmp("pbEvlu").updateText("已停止");
                                    },
                                    x: 520,
                                    y: 360,
                                    height: 30,
                                    id: 'btnEvluProgressStop',
                                    width: 80,
                                    text: '停止'
                                },
                                {
                                    xtype: 'button',
                                    handler: function(button, e) {
                                        Ext.getCmp("ctnEfctEvlu").getLayout().setActiveItem(1);
                                    },
                                    x: 770,
                                    y: 360,
                                    height: 30,
                                    id: 'btnEvluProgressBack',
                                    width: 80,
                                    text: '返回'
                                }
                            ]
                        },
                        {
                            xtype: 'form',
                            id: 'fpnlEvlu',
                            layout: 'absolute',
                            title: '效果评估',
                            items: [
                                {
                                    xtype: 'textfield',
                                    x: 300,
                                    y: 50,
                                    id: 'tfSugScore',
                                    width: 300,
                                    fieldLabel: '群众意见得分',
                                    allowBlank: false,
                                    emptyText: '请输入权重'
                                },
                                {
                                    xtype: 'textfield',
                                    x: 300,
                                    y: 200,
                                    id: 'tfWeightCQ',
                                    width: 300,
                                    fieldLabel: '拆迁过程得分',
                                    allowBlank: false,
                                    emptyText: '请输入权重'
                                },
//                                {
//                                    xtype: 'textfield',
//                                    x: 300,
//                                    y: 150,
//                                    id: 'tfGHAreaDif',
//                                    width: 300,
//                                    fieldLabel: '规划面积差值',
//                                    allowBlank: false,
//                                    emptyText: '请输入权重'
//                                },
//                                {
//                                    xtype: 'textfield',
//                                    x: 300,
//                                    y: 250,
//                                    id: 'tfCQAreaDif',
//                                    width: 300,
//                                    fieldLabel: '拆迁面积差值',
//                                    allowBlank: false,
//                                    emptyText: '请输入权重'
//                                },
                                {
                                    xtype: 'textfield',
                                    x: 300,
                                    y: 350,
                                    id: 'tfPwnFreq',
                                    width: 300,
                                    fieldLabel: '预警频率',
                                    allowBlank: false,
                                    emptyText: '请输入权重'
                                },
                                {
                                    xtype: 'label',
                                    x: 650,
                                    y: 50,
                                    height: 50,
                                    id: 'lblSugScoreInfo',
                                    width: 440,
                                    text: '说明：群众对规划、安置、补偿、复垦四个环节的综合意见得分'
                                },
                                {
                                    xtype: 'label',
                                    x: 650,
                                    y: 150,
                                    height: 50,
                                    id: 'lblGHAreaDifInfo',
                                    width: 440,
                                    text: '说明：即规划面积差异情况，包括面积数值差异与空间错位两种情况'
                                },
                                {
                                    xtype: 'label',
                                    x: 650,
                                    y: 250,
                                    height: 50,
                                    id: 'lblCQAreaDifInfo',
                                    width: 440,
                                    text: '说明：即拆迁面积差异情况，包括面积数值差异与空间错位两种情况'
                                },
                                {
                                    xtype: 'label',
                                    x: 650,
                                    y: 350,
                                    height: 50,
                                    id: 'lblPwnFreqInfo',
                                    width: 440,
                                    text: '说明：规划—拆迁过程中触发系统预警的频率'
                                },
                                {
                                    xtype: 'combobox',
                                    x: 1,
                                    y: 200,
                                    id: 'cmbEvluModel',
                                    width: 250,
                                    fieldLabel: '选择评估模型',
                                    allowBlank: false,
                                    editable: false,
                                    displayField: 'text',
                                    forceSelection: true,
                                    store: new Ext.data.ArrayStore({
                                    	fields: ['value', 'text'],
                                    	data: [
                                    	    ['1', '多因素加权模型'],
//                                    	/    ['2', '其它模型'],
                                    	],
                                    }),
                                    mode: 'local',
                                    valueField: 'value',
                                    value: '1'
                                },
                                {
                                    xtype: 'button',
                                    handler: function(button, e) {
                                        Ext.getCmp("ctnEfctEvlu").getLayout().setActiveItem(0);
                                        jsWeightOne = Ext.getCmp("tfSugScore").getValue();
                                        jsWeightTwo = Ext.getCmp("tfWeightCQ").getValue();
                                        jsWeightThree = Ext.getCmp("tfPwnFreq").getValue();
                                        var count = 0;
                                        var percentage = 0;
                                        var progressText = "";
                                        var taskEvlu =
                                        {
                                            run:function(){
                                                count++;
                                                percentage = count/100;
                                                if(count <25){
                                                    progressText = "正在计算群众意见得分因子……"+count+"%";
                                                }
                                                else if(count == 25){
                                                    //弹出群众意见因子日志
                                                    var fpnlEvluLogSugScore = new Ext.form.FormPanel({
                                                        layout: 'absolute',
                                                        frame: true,
                                                        draggable: true,
                                                        closable: true,
                                                        floating: true,
                                                        title: '评估日志',
                                                        width: 400,
                                                        height: 420,
                                                        items: [
                                                        {
                                                            xtype: 'label',
                                                            x: 150,
                                                            y: 20,
                                                            style: {
                                                                fontSize: '16px',
                                                                fontFamily: '黑体'
                                                            },
                                                            text: '群众意见得分因子'
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 1,
                                                            y: 80,
                                                            id: 'tfLogSugPartAmount',
                                                            fieldLabel: '参与人数',
                                                            labelAlign: 'right',
                                                            width: 180,
                                                            name: 'peopleNumber',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 180,
                                                            y: 80,
                                                            id: 'tfLogSugAmount',
                                                            fieldLabel: '发表意见条数',
                                                            labelAlign: 'right',
                                                            width: 180,
                                                            name: 'suggestionNumber',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 88,
                                                            y: 160,
                                                            id: 'tfLogSugBCHigh',
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'maxPointBC',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 190,
                                                            y: 160,
                                                            id: 'tfLogSugBCLow',
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'minPointBC',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 300,
                                                            y: 160,
                                                            id: 'tfLogSugBCMean',
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'avgPointBC',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 88,
                                                            y: 206,
                                                            id: 'tfLogSugAZHigh',
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'maxPointAZ',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 190,
                                                            y: 206,
                                                            id: 'tfLogSugAZLow',
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'minPointAZ',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 300,
                                                            y: 206,
                                                            id: 'tfLogSugAZMean',
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'avgPointAZ',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 88,
                                                            y: 253,
                                                            id: 'tfLogSugFKHigh',
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'maxPointCQ',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 190,
                                                            y: 253,
                                                            id: 'tfLogSugFKLow',
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'minPointCQ',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 300,
                                                            y: 253,
                                                            id: 'tfLogSugFKMean',
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'avgPointCQ',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 88,
                                                            y: 300,
                                                            id: 'tfLogSugQTHigh',
                                                            width: 80,
                                                            name: 'maxPointQT',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 190,
                                                            y: 300,
                                                            id: 'tfLogSugQTLow',
                                                            width: 80,
                                                            name: 'minPointQT',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 300,
                                                            y: 300,
                                                            id: 'tfLogSugQTMean',
                                                            width: 80,
                                                            name: 'avgPointQT',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 28,
                                                            y: 350,
                                                            id: 'tfLogSugScoreTotal',
                                                            fieldLabel: '总得分',
                                                            width: 300,
                                                            name: 'totalPointYJ',
                                                            labelWidth: 85,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 28,
                                                            y: 160,
                                                            text: '补偿意见：'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 28,
                                                            y: 206,
                                                            text: '安置意见：'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 28,
                                                            y: 253,
                                                            text: '拆迁意见：'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 28,
                                                            y: 300,
                                                            text: '其他意见：'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 106,
                                                            y: 140,
                                                            text: '最高分'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 213,
                                                            y: 140,
                                                            text: '最低分'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 320,
                                                            y: 140,
                                                            text: '平均分'
                                                        }
                                                        ]
                                                    });
                                                    fpnlEvluLogSugScore.loadRecord(jsEvluStore.getAt(0));
                                                    fpnlEvluLogSugScore.showAt(170, 100);
                                                    //fpnlEvluLogSugScore.showAt(170, -500);
                                                }
                                                else if(count >25 & count <50){
                                                    progressText = "正在计算拆迁过程因子……"+count+"%";
                                                }
                                                else if(count == 50){
                                                	
                                                	var fpnlEvluLogDemScore = new Ext.form.FormPanel({
                                                        layout: 'absolute',
                                                        frame: true,
                                                        draggable: true,
                                                        closable: true,
                                                        floating: true,
                                                        title: '评估日志',
                                                        width: 400,
                                                        height: 420,
                                                        items: [
                                                        {
                                                            xtype: 'label',
                                                            x: 150,
                                                            y: 20,
                                                            style: {
                                                                fontSize: '16px',
                                                                fontFamily: '黑体'
                                                            },
                                                            text: '拆迁过程得分'
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 1,
                                                            y: 80,
                                                           
                                                            fieldLabel: '拆除房屋数',
                                                            labelAlign: 'right',
                                                            width: 180,
                                                            name: 'houseNumber',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 180,
                                                            y: 80,
                                                          
                                                            fieldLabel: '拆迁日志数',
                                                            labelAlign: 'right',
                                                            width: 180,
                                                            name: 'logNumber',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 88,
                                                            y: 160,
                                                          
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'maxPointGZ',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 190,
                                                            y: 160,
                                                         
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'minPointGZ',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 300,
                                                            y: 160,
                                                          
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'avgPointGZ',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 88,
                                                            y: 206,
                                                          
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'maxPointXZ',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 190,
                                                            y: 206,
                                                           
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'minPointXZ',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 300,
                                                            y: 206,
                                                           
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'avgPointXZ',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 88,
                                                            y: 253,
                                                           
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'maxPointGT',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 190,
                                                            y: 253,
                                                         
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'minPointGT',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 300,
                                                            y: 253,
                                                           
                                                            width: 80,
                                                            hideLabel: true,
                                                            name: 'avgPointGT',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 88,
                                                            y: 300,
                                                        
                                                            width: 80,
                                                            name: 'maxPointNH',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 190,
                                                            y: 300,
                                                         
                                                            width: 80,
                                                            name: 'minPointNH',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 300,
                                                            y: 300,
                                                         
                                                            width: 80,
                                                            name: 'avgPointNH',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 28,
                                                            y: 350,
                                                          
                                                            fieldLabel: '总得分',
                                                            width: 300,
                                                            name: 'totalPointCQ',
                                                            labelWidth: 85,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 28,
                                                            y: 160,
                                                            text: '工作人员：'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 28,
                                                            y: 206,
                                                            text: '乡镇部门：'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 28,
                                                            y: 253,
                                                            text: '国土部门：'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 28,
                                                            y: 300,
                                                            text: '农户主体：'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 106,
                                                            y: 140,
                                                            text: '最高分'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 213,
                                                            y: 140,
                                                            text: '最低分'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 320,
                                                            y: 140,
                                                            text: '平均分'
                                                        }
                                                        ]
                                                    });
                                                	fpnlEvluLogDemScore.loadRecord(jsEvluStore.getAt(0));
                                                    fpnlEvluLogDemScore.showAt(440, 100);
                                                	/*
                                                    //弹出规划面积差异因子日志
                                                    var fpnlEvluLogGHAreaDif = new Ext.form.FormPanel({
                                                        layout: 'absolute',
                                                        frame: true,
                                                        draggable: true,
                                                        closable: true,
                                                        floating: true,
                                                        title: '评估日志',
                                                        width: 400,
                                                        height: 500,
                                                        items: [
                                                        {
                                                            xtype: 'label',
                                                            x: 150,
                                                            y: 30,
                                                            style: {
                                                                fontSize: '16px',
                                                                fontFamily: '黑体'
                                                            },
                                                            text: '规划面积差异因子'
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 40,
                                                            y: 120,
                                                            id: 'tfLogGHAreaAmount',
                                                            fieldLabel: '片块个数',
                                                            value: '6',
                                                            width: 300,
                                                            labelWidth: 85,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 130,
                                                            y: 210,
                                                            id: 'tfLogGHAreaSZHigh',
                                                            width: 60,
                                                            value: '0',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 210,
                                                            y: 210,
                                                            id: 'tfLogGHAreaSZLow',
                                                            width: 60,
                                                            value: '0',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 290,
                                                            y: 210,
                                                            id: 'tfLogGHAreaSZMean',
                                                            width: 60,
                                                            value: '0',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 130,
                                                            y: 310,
                                                            id: 'tfLogGHAreaCWHigh',
                                                            width: 60,
                                                            value: '0',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 210,
                                                            y: 310,
                                                            id: 'tfLogGHAreaCWLow',
                                                            width: 60,
                                                            value: '0',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 290,
                                                            y: 310,
                                                            id: 'tfLogGHAreaCWMean',
                                                            width: 60,
                                                            value: '0',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 40,
                                                            y: 400,
                                                            id: 'tfLogGHAreaDifTotal',
                                                            fieldLabel: '总得分',
                                                            width: 300,
                                                            value: '100',
                                                            labelWidth: 85,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 40,
                                                            y: 210,
                                                            text: '面积数值差值：'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 40,
                                                            y: 310,
                                                            text: '空间错位差值：'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 140,
                                                            y: 180,
                                                            text: '最大值'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 220,
                                                            y: 180,
                                                            text: '最小值'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 300,
                                                            y: 180,
                                                            text: '平均值'
                                                        }
                                                        ]
                                                    });
                                                    fpnlEvluLogGHAreaDif.showAt(370,100);
                                                    */
                                //                    fpnlEvluLogGHAreaDif.showAt(370,-950);
                                                }
                                                
                                                
                                                else if(count >50 & count <75){
                                                    progressText = "正在计算预警频率因子……"+count+"%";
                                                }
                                                else if(count == 75){
                                                	var fpnlEvluLogPwnFreq = new Ext.form.FormPanel({
                                                        layout: 'absolute',
                                                        frame: true,
                                                        draggable: true,
                                                        closable: true,
                                                        floating: true,
                                                        title: '评估日志',
                                                        width: 400,
                                                        height: 560,
                                                        items: [
                                                        {
                                                            xtype: 'label',
                                                            x: 154,
                                                            y: 24,
                                                            style: {
                                                                fontSize: '16px',
                                                                fontFamily: '黑体'
                                                            },
                                                            text: '预警频率因子'
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 74,
                                                            y: 96,
                                                            id: 'tfLogPwnCount',
                                                            fieldLabel: '预警次数',
                                                            labelWidth: 100,
                                                            name: 'warmNumber',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 74,
                                                            y: 168,
                                                            id: 'tfLogPwnFreq',
                                                            fieldLabel: '预警频率',
                                                            labelWidth: 100,
                                                            name: 'warmFrequency',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 74,
                                                            y: 240,
                                                            id: 'tfLogPwnFast',
                                                            fieldLabel: '最快处理时间',
                                                            labelWidth: 100,
                                                            name: 'fastSolve',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 74,
                                                            y: 312,
                                                            id: 'tfLogPwnSlow',
                                                            fieldLabel: '最慢处理时间',
                                                            labelWidth: 100,
                                                            name: 'slowSolve',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 74,
                                                            y: 384,
                                                            id: 'tfLogPwnMean',
                                                            fieldLabel: '平均处理时间',
                                                            labelWidth: 100,
                                                            name: 'avgSolve',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 74,
                                                            y: 456,
                                                            id: 'tfLogPwnFreqTotal',
                                                            fieldLabel: '总得分',
                                                            labelWidth: 100,
                                                            name: 'totalPointWarm',
                                                            readOnly: true
                                                        }
                                                        ]
                                                    });
                                                    fpnlEvluLogPwnFreq.loadRecord(jsEvluStore.getAt(0));
                                                    fpnlEvluLogPwnFreq.showAt(660,100);
                                                	/*
                                                    //弹出拆迁面积差异因子日志
                                                    var fpnlEvluLogCQAreaDif = new Ext.form.FormPanel({
                                                        layout: 'absolute',
                                                        frame: true,
                                                        draggable: true,
                                                        closable: true,
                                                        floating: true,
                                                        title: '评估日志',
                                                        width: 400,
                                                        height: 500,
                                                        items: [
                                                        {
                                                            xtype: 'label',
                                                            x: 150,
                                                            y: 30,
                                                            style: {
                                                                fontSize: '16px',
                                                                fontFamily: '黑体'
                                                            },
                                                            text: '拆迁面积差异因子'
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 40,
                                                            y: 120,
                                                            id: 'tfLogCQAreaAmount',
                                                            fieldLabel: '片块个数',
                                                            width: 300,
                                                            value: '6',
                                                            labelWidth: 85,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 130,
                                                            y: 210,
                                                            id: 'tfLogCQAreaSZHigh',
                                                            width: 60,
                                                            value: '0',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 210,
                                                            y: 210,
                                                            id: 'tfLogCQAreaSZLow',
                                                            width: 60,
                                                            value: '0',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 290,
                                                            y: 210,
                                                            id: 'tfLogCQAreaSZMean',
                                                            width: 60,
                                                            value: '0',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 130,
                                                            y: 310,
                                                            id: 'tfLogCQAreaCWHigh',
                                                            width: 60,
                                                            value: '0',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 210,
                                                            y: 310,
                                                            id: 'tfLogCQAreaCWLow',
                                                            width: 60,
                                                            value: '0',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 290,
                                                            y: 310,
                                                            id: 'tfLogCQAreaCWMean',
                                                            width: 60,
                                                            value: '0',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 40,
                                                            y: 400,
                                                            id: 'tfLogCQAreaDifTotal',
                                                            fieldLabel: '总得分',
                                                            width: 300,
                                                            value: '100',
                                                            labelWidth: 85,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 40,
                                                            y: 210,
                                                            text: '面积数值差值：'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 40,
                                                            y: 310,
                                                            text: '空间错位差值：'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 140,
                                                            y: 180,
                                                            text: '最大值'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 220,
                                                            y: 180,
                                                            text: '最小值'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 300,
                                                            y: 180,
                                                            text: '平均值'
                                                        }
                                                        ]
                                                    });
                                                    fpnlEvluLogCQAreaDif.showAt(570,100);
                                                    */
                                                    //fpnlEvluLogCQAreaDif.showAt(570,-1450);
                                                }
                                                
                                                /*
                                                else if(count >75 & count < 90){
                                                    progressText = "正在计算预警频率因子……"+count+"%";
                                                }
                                                else if(count == 90){
                                                    //弹出预警频率因子日志
                                                    var fpnlEvluLogPwnFreq = new Ext.form.FormPanel({
                                                        layout: 'absolute',
                                                        frame: true,
                                                        draggable: true,
                                                        closable: true,
                                                        floating: true,
                                                        title: '评估日志',
                                                        width: 400,
                                                        height: 560,
                                                        items: [
                                                        {
                                                            xtype: 'label',
                                                            x: 154,
                                                            y: 24,
                                                            style: {
                                                                fontSize: '16px',
                                                                fontFamily: '黑体'
                                                            },
                                                            text: '预警频率因子'
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 74,
                                                            y: 96,
                                                            id: 'tfLogPwnCount',
                                                            fieldLabel: '预警次数',
                                                            labelWidth: 100,
                                                            value: '0',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 74,
                                                            y: 168,
                                                            id: 'tfLogPwnFreq',
                                                            fieldLabel: '预警频率',
                                                            labelWidth: 100,
                                                            value: '无',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 74,
                                                            y: 240,
                                                            id: 'tfLogPwnFast',
                                                            fieldLabel: '最快处理时间',
                                                            labelWidth: 100,
                                                            value: '无',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 74,
                                                            y: 312,
                                                            id: 'tfLogPwnSlow',
                                                            fieldLabel: '最慢处理时间',
                                                            labelWidth: 100,
                                                            value: '无',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 74,
                                                            y: 384,
                                                            id: 'tfLogPwnMean',
                                                            fieldLabel: '平均处理时间',
                                                            labelWidth: 100,
                                                            value: '无',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 74,
                                                            y: 456,
                                                            id: 'tfLogPwnFreqTotal',
                                                            fieldLabel: '总得分',
                                                            labelWidth: 100,
                                                            value: '100',
                                                            readOnly: true
                                                        }
                                                        ]
                                                    });
                                                    fpnlEvluLogPwnFreq.showAt(770,100);
                                                    //fpnlEvluLogPwnFreq.showAt(770,-2000);
                                                }
                                                */
                                                else if(count >75 & count <95){
                                                    progressText = "正在生成评估报告……"+count+"%";
                                                }
                                                else if(count == 95){                                                	
                                                    progressText = "完成"+count+"%";
                                                  
                                                    var fpnlEvluReport = new Ext.form.FormPanel({
                                                        layout: 'absolute',
                                                        frame: true,
                                                        draggable: true,
                                                        closable: true,
                                                        floating: true,
                                                        title: '评估结果',
                                                        width: 470,
                                                        height: 650,
                                                        items: [
                                                        {
                                                            xtype: 'label',
                                                            x: 173,
                                                            y: 10,
                                                            style: {
                                                                fontSize: '28px',
                                                                fontFamily: '黑体'
                                                            },
                                                            text: '评估报告'
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 30,
                                                            y: 58,
                                                            id: 'tfEvluReportPID',
                                                            fieldLabel: '项目编号',
                                                            width: 300,
                                                            labelWidth: 85, 
                                                            value: jsEvaluteProjectID,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 30,
                                                            y: 113,
                                                            id: 'tfEvluReportModel',
                                                            fieldLabel: '评估模型',
                                                            width: 300,
                                                            labelWidth: 85,
                                                            value: '多因素加权',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 98,
                                                            y: 188,
                                                            id: 'tfEvluReportSugName',
                                                            width: 100,
                                                            hideLabel: true,
                                                            value: '意见因子',
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 218,
                                                            y: 188,
                                                            id: 'tfEvluReportSugWeight',
                                                            width: 100,
                                                            value: jsWeightOne,
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 338,
                                                            y: 188,
                                                            name: 'totalPointYJ',
                                                            id: 'tfEvluReportSugScore',
                                                            width: 100,
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 98,
                                                            y: 295,
                                                            id: 'tfEvluReportGHAreaName',
                                                            width: 100,
                                                            value: '拆迁因子',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 218,
                                                            y: 295,
                                                            id: 'tfEvluReportGHAreaWeight',
                                                            width: 100,
                                                            value: jsWeightTwo,
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 338,
                                                            y: 295,
                                                            id: 'tfEvluReportGHAreaScore',
                                                            width: 100,
                                                            name: 'totalPointCQ',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
//                                                        {
//                                                            xtype: 'textfield',
//                                                            x: 98,
//                                                            y: 338,
//                                                            value: '拆迁面积因子',
//                                                            id: 'tfEvluReportCQAreaName',
//                                                            width: 100,
//                                                            hideLabel: true,
//                                                            readOnly: true
//                                                        },
//                                                        {
//                                                            xtype: 'textfield',
//                                                            x: 218,
//                                                            y: 338,
//                                                            value: '0.25',
//                                                            id: 'tfEvluReportCQAreaWeight',
//                                                            width: 100,
//                                                            hideLabel: true,
//                                                            readOnly: true
//                                                        },
//                                                        {
//                                                            xtype: 'textfield',
//                                                            x: 338,
//                                                            y: 338,
//                                                            value: '100',
//                                                            id: 'tfEvluReportCQAreaScore',
//                                                            width: 100,
//                                                            hideLabel: true,
//                                                            readOnly: true
//                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 98,
                                                            y: 413,
                                                            id: 'tfEvluReportPwnName',
                                                            width: 100,
                                                            value: '预警因子',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 218,
                                                            y: 413,
                                                            id: 'tfEvluReportPwnWeight',
                                                            width: 100,
                                                            value: jsWeightThree,
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 338,
                                                            y: 413,
                                                            id: 'tfEvluReportPwnScore',
                                                            width: 100,
                                                            name: 'totalPointWarm',
                                                            hideLabel: true,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'textfield',
                                                            x: 30,
                                                            y: 488,
                                                            id: 'tfEvluReportScoreTotal',
                                                            fieldLabel: '总得分',
                                                            width: 300,
                                                            
                                                            labelWidth: 85,
                                                            readOnly: true
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 30,
                                                            y: 188,
                                                            text: '评估因子1：'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 30,
                                                            y: 295,
                                                            text: '评估因子2：'
                                                        },
//                                                        {
//                                                            xtype: 'label',
//                                                            x: 30,
//                                                            y: 263,
//                                                            text: '评估因子2：'
//                                                        },
//                                                        {
//                                                            xtype: 'label',
//                                                            x: 30,
//                                                            y: 338,
//                                                            text: '评估因子3：'
//                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 30,
                                                            y: 413,
                                                            text: '评估因子3：'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 128,
                                                            y: 158,
                                                            text: '名称'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 248,
                                                            y: 158,
                                                            text: '权重'
                                                        },
                                                        {
                                                            xtype: 'label',
                                                            x: 368,
                                                            y: 158,
                                                            text: '得分'
                                                        },
                                                        {
                                                            xtype: 'button',
                                                            id: 'btnEvluReportSave',
                                                            x: 113,
                                                            y: 550,
                                                            height: 30,
                                                            width: 80,
                                                            text: '确定',
                                                            handler: function(button, e) {
                                                            	fpnlEvluReport.close();
                                                            }
                                                        },
                                                        {
                                                            xtype: 'button',
                                                            id: 'btnEvluReportPrint',
                                                            x: 300,
                                                            y: 550,
                                                            height: 30,
                                                            width: 80,
                                                            text: '取消',
                                                            handler: function(button, e) {
                                                            	fpnlEvluReport.close();	
                                                            }
                                                        }
                                                        ]
                                                    });
                                                    fpnlEvluReport.loadRecord(jsEvluStore.getAt(0));
                                                    var point1 = jsWeightOne * Ext.getCmp("tfEvluReportSugScore").getValue();
                                                    var point2 = jsWeightTwo * Ext.getCmp("tfEvluReportGHAreaScore").getValue();
                                                    var point3 = jsWeightThree * Ext.getCmp("tfEvluReportPwnScore").getValue();
                                                    Ext.getCmp("tfEvluReportScoreTotal").setValue(point1 + point2 + point3);
                                                    fpnlEvluReport.showAt(500,0);
                                                }
                                                Ext.getCmp("pbEvlu").updateProgress(percentage,progressText);
                                            },
                                            interval: 300,
                                            duration: 30000
                                        };
                                        Ext.TaskManager.start(taskEvlu);



                                    },
                                    x: 430,
                                    y: 430,
                                    height: 30,
                                    id: 'btnStartEvlu',
                                    width: 70,
                                    text: '开始评估'
                                },
                                {
                                    xtype: 'button',
                                    handler: function(button, e) {
                                        Ext.getCmp("fpnlEvlu").form.reset();
                                    },
                                    x: 530,
                                    y: 430,
                                    height: 30,
                                    id: 'btnResetEvlu',
                                    width: 70,
                                    text: '重置'
                                }
                            ]
                        }
                    ]
                },
                {
                	xtype: 'textfield',
                	hide: 'true',
                	id: 'evluProjecID'
                }
            ]
        });

        me.callParent(arguments);
       
    },


});