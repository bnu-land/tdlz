/*
 * File: app/view/db_UserPrivilegeManagerTab.js
 *
 * This file was generated by Sencha Architect version 3.1.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 4.2.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 4.2.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('MyApp.view.db_UserPrivilegeManagerTab', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.db_UserPrivilegeManagerTab',

    requires: [
        'Ext.tab.Panel',
        'Ext.tab.Tab',
        'Ext.toolbar.Toolbar',
        'Ext.form.field.Text',
        'Ext.grid.Panel',
        'Ext.grid.RowNumberer',
        'Ext.grid.column.Action',
        'Ext.grid.column.Date',
        'Ext.grid.column.Boolean',
        'Ext.grid.View',
        'Ext.selection.CheckboxModel'
    ],

    id: 'db_UserPrivilegeManagerTab',
    layout: 'fit',
    title: '用户管理',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'tabpanel',
                    activeTab: 0,
                    items: [
                        {
                            xtype: 'panel',
                            layout: 'fit',
                            title: '用户信息管理',
                            dockedItems: [
                                {
                                    xtype: 'toolbar',
                                    dock: 'top',
                                    items: [
                                        {
                                            xtype: 'textfield',
                                            id: 'searchKeyword_UserInfo',
                                            emptyText: '请输入搜索关键字'
                                        },
                                        {
                                            xtype: 'button',
                                            icon: 'images/file_view0.png',
                                            text: '搜索',
                                            listeners: {
                                                click: {
                                                    fn: me.onButtonClick,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            icon: 'images/table_refresh.png',
                                            text: '刷新',
                                            listeners: {
                                                click: {
                                                    fn: me.onButtonClick1,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            icon: 'images/table_add.png',
                                            text: '添加用户',
                                            listeners: {
                                                click: {
                                                    fn: me.onButtonClick2,
                                                    scope: me
                                                }
                                            }
                                        }
                                    ]
                                }
                            ],
                            items: [
                                {
                                    xtype: 'gridpanel',
                                    autoScroll: true,
                                    store: 'uUserInfoStore',
                                    columns: [
                                        {
                                            xtype: 'rownumberer',
                                            width: 40,
                                            text: '序号'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 70,
                                            dataIndex: 'userId',
                                            text: '用户编号'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 100,
                                            dataIndex: 'userName',
                                            text: '用户名'
                                        },
                                        {
                                            xtype: 'actioncolumn',
                                            handler: function(grid, rowIndex, colIndex, actionItem, event, record, row) {
                                                var win = Ext.widget('db_UserRoleSettingWindow');
                                                win.show();

                                                //查询该用户的所有用户
                                                Ext.Ajax.request(
                                                {
                                                    url : 'del_UserInfoById',
                                                    params :
                                                    {
                                                        userId : userId
                                                    },
                                                    success : function (response){
                                                        Ext.Msg.alert('成功提示', '记录删除成功。');
                                                        //successResult();
                                                        var mystore = Ext.StoreMgr.get('uUserInfoStore');
                                                        mystore.load();
                                                    },
                                                    failure : function (response){
                                                        //failedResult();
                                                        // Ext.Msg.alert('失败提示', '记录删除失败。');
                                                    }
                                                });



                                                //		var keyword = record.get('userName').getValue();
                                                //
                                                //		var extra_params={
                                                //		    searchKeyword:keyword
                                                //		};
                                                //		Ext.apply(store.proxy.extraParams,extra_params);
                                                //
                                                //		if (colIndex === undefined || colIndex < 2) {
                                                //		    return;
                                                //		}
                                                //		var win = Ext.widget('db_UserInfoWindow');
                                                //		win.show();
                                                //
                                                //		//var form = Ext.widget('db_UserWindowForm');
                                                //		var form = Ext.getCmp('db_UserWindowForm');
                                                //		console.log("form:",form);
                                                //		form.loadRecord(record);
                                                //
                                                //
                                                //		//对显示的结果进行处理
                                                //		//注册日期的处理
                                                //		var registerdateField = Ext.getCmp('users_registerdatew');
                                                //		var value = registerdateField.getValue();
                                                //		var date = new Date(value);
                                                //		console.log('date',date);
                                                //		if(date instanceof Date){
                                                //		    var str = date.getFullYear()+'-'+(date.getMonth()+1)+'-'+date.getDate();
                                                //		    console.log('date2',str);
                                                //		    registerdateField.setValue(str);
                                                //		}
                                                //		//密码框的处理
                                                //		var pwdField = Ext.getCmp('users_passwordw');
                                                //		pwdField.setValue("");
                                            },
                                            renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                var deptId = record.get('deptId');
                                                return '<div style="float:right; font-size: 13px; line-height: 1em;">' + deptId + '</div>'
                                            },
                                            width: 120,
                                            dataIndex: 'enabled',
                                            menuText: '',
                                            icon: 'images/table_edit.png'
                                        },
                                        {
                                            xtype: 'actioncolumn',
                                            handler: function(grid, rowIndex, colIndex, actionItem, event, record, row) {
                                                if (colIndex === undefined || colIndex < 2) {
                                                    return;
                                                }
                                                var win = Ext.widget('db_UserInfoWindow');
                                                win.show();

                                                //var form = Ext.widget('db_UserWindowForm');
                                                var form = Ext.getCmp('db_UserWindowForm');
                                                console.log("form:",form);
                                                form.loadRecord(record);


                                                //对显示的结果进行处理
                                                //注册日期的处理
                                                var registerdateField = Ext.getCmp('users_registerdatew');
                                                var value = registerdateField.getValue();
                                                var date = new Date(value);
                                                console.log('date',date);
                                                if(date instanceof Date){
                                                    var str = date.getFullYear()+'-'+(date.getMonth()+1)+'-'+date.getDate();
                                                    console.log('date2',str);
                                                    registerdateField.setValue(str);
                                                }
                                                //密码框的处理
                                                var pwdField = Ext.getCmp('users_passwordw');
                                                pwdField.setValue("");
                                            },
                                            width: 50,
                                            dataIndex: 'date',
                                            menuText: '',
                                            icon: 'images/table_edit.png'
                                        },
                                        {
                                            xtype: 'actioncolumn',
                                            handler: function(grid, rowIndex, colIndex, actionItem, event, record, row) {
                                                Ext.Msg.confirm('您正在删除', '用户：' + record.get('trueName') + '，用户编号为：'+record.get('userId')+'，<br/> 确认删除？', getResult);
                                                function getResult(confirm)
                                                {
                                                    console.log('confirm:', confirm);
                                                    if (confirm == "yes"){
                                                        var userId = record.get("userId");
                                                        console.log('userId:',userId);
                                                        Ext.Ajax.request(
                                                        {
                                                            url : 'del_UserInfoById',
                                                            params :
                                                            {
                                                                userId : userId
                                                            },
                                                            success : function (response){
                                                                Ext.Msg.alert('成功提示', '记录删除成功。');
                                                                //successResult();
                                                                var mystore = Ext.StoreMgr.get('uUserInfoStore');
                                                                mystore.load();
                                                            },
                                                            failure : function (response){
                                                                //failedResult();
                                                                // Ext.Msg.alert('失败提示', '记录删除失败。');
                                                            }
                                                        });
                                                    }
                                                }
                                            },
                                            width: 50,
                                            dataIndex: 'date',
                                            icon: 'images/table_delete.png'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 80,
                                            dataIndex: 'trueName',
                                            text: '真实姓名'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 120,
                                            dataIndex: 'email',
                                            text: '邮箱地址'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 100,
                                            dataIndex: 'mobileNum',
                                            text: '手机号码'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            dataIndex: 'phoneNum',
                                            text: '固定电话'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 200,
                                            dataIndex: 'description',
                                            text: '用户描述'
                                        },
                                        {
                                            xtype: 'datecolumn',
                                            dataIndex: 'registerdate',
                                            text: '注册日期',
                                            format: 'Y-m-d'
                                        },
                                        {
                                            xtype: 'booleancolumn',
                                            width: 60,
                                            dataIndex: 'enabled',
                                            text: '是否可用',
                                            falseText: '否',
                                            trueText: '是'
                                        }
                                    ],
                                    selModel: Ext.create('Ext.selection.CheckboxModel', {

                                    }),
                                    listeners: {
                                        cellclick: {
                                            fn: me.onGridpanelCellClick,
                                            scope: me
                                        }
                                    }
                                }
                            ]
                        },
                        {
                            xtype: 'panel',
                            layout: 'fit',
                            title: '角色信息管理',
                            dockedItems: [
                                {
                                    xtype: 'toolbar',
                                    dock: 'top',
                                    items: [
                                        {
                                            xtype: 'textfield',
                                            id: 'searchKeyword_roleInfo',
                                            emptyText: '请输入搜索关键字'
                                        },
                                        {
                                            xtype: 'button',
                                            icon: 'images/file_view0.png',
                                            text: '搜索',
                                            listeners: {
                                                click: {
                                                    fn: me.onButtonClick3,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            icon: 'images/table_refresh.png',
                                            text: '刷新',
                                            listeners: {
                                                click: {
                                                    fn: me.onButtonClick11,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            icon: 'images/table_add.png',
                                            text: '添加角色',
                                            listeners: {
                                                click: {
                                                    fn: me.onButtonClick21,
                                                    scope: me
                                                }
                                            }
                                        }
                                    ]
                                }
                            ],
                            items: [
                                {
                                    xtype: 'gridpanel',
                                    store: 'uRoleInfoStore',
                                    columns: [
                                        {
                                            xtype: 'rownumberer',
                                            width: 40,
                                            text: '序号'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 120,
                                            dataIndex: 'roleNameCn',
                                            text: '角色名称'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 150,
                                            dataIndex: 'roleName',
                                            text: '角色标识'
                                        },
                                        {
                                            xtype: 'booleancolumn',
                                            width: 60,
                                            dataIndex: 'enabled',
                                            text: '是否启用',
                                            falseText: '否',
                                            trueText: '是'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 400,
                                            dataIndex: 'description',
                                            text: '描述'
                                        },
                                        {
                                            xtype: 'actioncolumn',
                                            handler: function(grid, rowIndex, colIndex, actionItem, event, record, row) {
                                                if (colIndex === undefined || colIndex < 2) {
                                                    return;
                                                }
                                                var win = Ext.widget('db_RoleInfoWindow');
                                                win.show();

                                                var form = Ext.getCmp('db_RoleInfoWindowForm').getForm();
                                                form.loadRecord(record);

                                            },
                                            width: 50,
                                            dataIndex: 'date',
                                            menuText: '',
                                            icon: 'images/table_edit.png'
                                        },
                                        {
                                            xtype: 'actioncolumn',
                                            handler: function(grid, rowIndex, colIndex, actionItem, event, record, row) {
                                                Ext.Msg.confirm('您正在删除', '角色：' + record.get('roleNameCn') + '，角色代码为：'+record.get('roleName')+'，<br/> 确认删除？', getResult);
                                                function getResult(confirm)
                                                {
                                                    console.log('confirm:', confirm);
                                                    if (confirm == "yes"){
                                                        var roleId = record.get("roleId");
                                                        Ext.Ajax.request(
                                                        {
                                                            url : 'del_RoleInfoById',
                                                            params :
                                                            {
                                                                roleId : roleId
                                                            },
                                                            success : function (response){
                                                                Ext.Msg.alert('成功提示', '角色删除成功。');
                                                                var mystore = Ext.StoreMgr.get('uRoleInfoStore');
                                                                mystore.load();
                                                            },
                                                            failure : function (response){

                                                            }
                                                        });
                                                    }
                                                }
                                            },
                                            width: 50,
                                            dataIndex: 'date',
                                            icon: 'images/table_delete.png'
                                        }
                                    ],
                                    selModel: Ext.create('Ext.selection.CheckboxModel', {

                                    })
                                }
                            ]
                        },
                        {
                            xtype: 'panel',
                            autoScroll: true,
                            layout: 'fit',
                            title: '权限信息管理',
                            dockedItems: [
                                {
                                    xtype: 'toolbar',
                                    dock: 'top',
                                    items: [
                                        {
                                            xtype: 'textfield',
                                            id: 'searchKeyword_RightInfo',
                                            emptyText: '请输入搜索关键字'
                                        },
                                        {
                                            xtype: 'button',
                                            icon: 'images/file_view0.png',
                                            text: '搜索',
                                            listeners: {
                                                click: {
                                                    fn: me.onButtonClick31,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            icon: 'images/table_refresh.png',
                                            text: '刷新',
                                            listeners: {
                                                click: {
                                                    fn: me.onButtonClick111,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            icon: 'images/table_add.png',
                                            text: '添加权限',
                                            listeners: {
                                                click: {
                                                    fn: me.onButtonClick211,
                                                    scope: me
                                                }
                                            }
                                        }
                                    ]
                                }
                            ],
                            items: [
                                {
                                    xtype: 'gridpanel',
                                    id: 'rightInfoGrid',
                                    autoScroll: true,
                                    store: 'uRightInfoStore',
                                    columns: [
                                        {
                                            xtype: 'rownumberer',
                                            width: 40,
                                            text: '序号'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 200,
                                            dataIndex: 'rightName',
                                            text: '权限名称'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            dataIndex: 'rightId',
                                            text: '权限编号'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 150,
                                            dataIndex: 'url',
                                            text: '权限地址'
                                        },
                                        {
                                            xtype: 'booleancolumn',
                                            width: 60,
                                            dataIndex: 'enabled',
                                            text: '是否启用',
                                            falseText: '否',
                                            trueText: '是'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 400,
                                            dataIndex: 'description',
                                            text: '描述'
                                        },
                                        {
                                            xtype: 'actioncolumn',
                                            handler: function(grid, rowIndex, colIndex, actionItem, event, record, row) {
                                                if (colIndex === undefined || colIndex < 2) {
                                                    return;
                                                }
                                                var win = Ext.widget('db_RightInfoWindow');
                                                win.show();

                                                var form = Ext.getCmp('db_RightInfoWindowForm');
                                                form.loadRecord(record);

                                                //对显示的内容进行处理
                                                //对权限名称进行处理
                                                var rightNameField = Ext.getCmp('w_rightName');
                                                var value = rightNameField.getValue();
                                                var index = value.lastIndexOf("&nbsp;");
                                                console.log(index);
                                                if(index>=0){
                                                    var substr = value.substring(index+6,value.length);
                                                    rightNameField.setValue(substr);
                                                }
                                            },
                                            width: 50,
                                            dataIndex: 'date',
                                            menuText: '',
                                            icon: 'images/table_edit.png'
                                        },
                                        {
                                            xtype: 'actioncolumn',
                                            handler: function(grid, rowIndex, colIndex, actionItem, event, record, row) {
                                                //去除权限名称的空格
                                                var rightName = record.get('rightName');
                                                var index = rightName.lastIndexOf("&nbsp;");
                                                var substr;
                                                if(index>=0){
                                                    substr = rightName.substring(index+6,rightName.length);
                                                }
                                                Ext.Msg.confirm('您正在删除', '权限："' + substr + '"，权限代码为："'+record.get('url')+'"，<br/> 确认删除？', getResult);

                                                function getResult(confirm)
                                                {
                                                    console.log('confirm:', confirm);
                                                    if (confirm == "yes"){
                                                        var rightId = record.get("rightId");
                                                        Ext.Ajax.request(
                                                        {
                                                            url : 'del_RightInfoById',
                                                            params :
                                                            {
                                                                rightId : rightId
                                                            },
                                                            success : function (response){
                                                                Ext.Msg.alert('成功提示', '权限删除成功。');
                                                                //successResult();
                                                                var mystore = Ext.StoreMgr.get('uRightInfoStore');
                                                                mystore.load();
                                                            },
                                                            failure : function (response){
                                                                //failedResult();
                                                                // Ext.Msg.alert('失败提示', '记录删除失败。');
                                                            }
                                                        });
                                                    }
                                                }
                                            },
                                            width: 50,
                                            dataIndex: 'date',
                                            icon: 'images/table_delete.png'
                                        }
                                    ],
                                    selModel: Ext.create('Ext.selection.CheckboxModel', {

                                    })
                                }
                            ]
                        },
                        {
                            xtype: 'panel',
                            autoScroll: true,
                            layout: 'fit',
                            title: '部门信息管理',
                            dockedItems: [
                                {
                                    xtype: 'toolbar',
                                    dock: 'top',
                                    items: [
                                        {
                                            xtype: 'textfield',
                                            id: 'searchKeyword_DeptInfo',
                                            emptyText: '请输入搜索关键字'
                                        },
                                        {
                                            xtype: 'button',
                                            icon: 'images/file_view0.png',
                                            text: '搜索',
                                            listeners: {
                                                click: {
                                                    fn: me.onButtonClick31111,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            icon: 'images/table_refresh.png',
                                            text: '刷新',
                                            listeners: {
                                                click: {
                                                    fn: me.onButtonClick111111,
                                                    scope: me
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'button',
                                            icon: 'images/table_add.png',
                                            text: '添加新部门',
                                            listeners: {
                                                click: {
                                                    fn: me.onButtonClick211111,
                                                    scope: me
                                                }
                                            }
                                        }
                                    ]
                                }
                            ],
                            items: [
                                {
                                    xtype: 'gridpanel',
                                    id: 'deptInfoGrid',
                                    autoScroll: true,
                                    store: 'uDeptInfoStore',
                                    columns: [
                                        {
                                            xtype: 'rownumberer'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 200,
                                            dataIndex: 'deptName',
                                            text: '部门名称'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            dataIndex: 'deptId',
                                            text: '部门编号'
                                        },
                                        {
                                            xtype: 'booleancolumn',
                                            width: 50,
                                            dataIndex: 'enabled',
                                            text: '可用',
                                            falseText: '否',
                                            trueText: '是'
                                        },
                                        {
                                            xtype: 'gridcolumn',
                                            width: 400,
                                            dataIndex: 'description',
                                            text: '描述'
                                        },
                                        {
                                            xtype: 'actioncolumn',
                                            handler: function(grid, rowIndex, colIndex, actionItem, event, record, row) {
                                                if (colIndex === undefined || colIndex < 2) {
                                                    return;
                                                }
                                                var win = Ext.widget('db_DeptInfoWindow');
                                                win.show();

                                                var form = Ext.getCmp('db_DeptInfoWindowForm');
                                                form.loadRecord(record);

                                                //对显示的内容进行处理
                                                //对部门名称进行处理
                                                var deptNameField = Ext.getCmp('deptWindow_deptName');
                                                var value = deptNameField.getValue();
                                                var index = value.lastIndexOf("&nbsp;");
                                                console.log(index);
                                                if(index>=0){
                                                    var substr = value.substring(index+6,value.length);
                                                    deptNameField.setValue(substr);
                                                }
                                            },
                                            width: 50,
                                            icon: 'images/table_edit.png'
                                        },
                                        {
                                            xtype: 'actioncolumn',
                                            handler: function(grid, rowIndex, colIndex, actionItem, event, record, row) {
                                                //去除名称的空格
                                                var deptName = record.get('deptName');
                                                var index = deptName.lastIndexOf("&nbsp;");
                                                var substr;
                                                if(index>=0){
                                                    substr = deptName.substring(index+6,deptName.length);
                                                }
                                                Ext.Msg.confirm('您正在删除', '部门："' + substr + '"，部门编号为："'+record.get('deptId')+'"，<br/> 确认删除？', getResult);
                                                function getResult(confirm)
                                                {
                                                    console.log('confirm:', confirm);
                                                    if (confirm == "yes"){
                                                        var deptId = record.get("deptId");
                                                        Ext.Ajax.request(
                                                        {
                                                            url : 'del_DeptInfoById',
                                                            params :
                                                            {
                                                                deptId : deptId
                                                            },
                                                            success : function (response){
                                                                Ext.Msg.alert('成功提示', '记录删除成功。');
                                                                //successResult();
                                                                var mystore = Ext.StoreMgr.get('uDeptInfoStore');
                                                                mystore.load();
                                                            },
                                                            failure : function (response){
                                                                //failedResult();
                                                                // Ext.Msg.alert('失败提示', '记录删除失败。');
                                                            }
                                                        });
                                                    }
                                                }
                                            },
                                            width: 50,
                                            icon: 'images/table_delete.png'
                                        }
                                    ],
                                    selModel: Ext.create('Ext.selection.CheckboxModel', {

                                    })
                                }
                            ]
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    },

    onButtonClick: function(button, e, eOpts) {
        var getKeyword = Ext.getCmp('searchKeyword_UserInfo').getValue();
        console.log("keyword:",getKeyword);
        var mystore = Ext.StoreMgr.get('uUserInfoStore'); //获得store对象
        //在load事件中添加参数
        mystore.load(
        {
            params :
            {
                searchKeyword : getKeyword
            }
        }
        );

    },

    onButtonClick1: function(button, e, eOpts) {
        Ext.getCmp('searchKeyword_UserInfo').setValue('');
        var mystore = Ext.StoreMgr.get('uUserInfoStore'); //获得store对象
        mystore.load();

    },

    onButtonClick2: function(button, e, eOpts) {
        var win = Ext.widget('db_UserInfoAddWindow');
        win.show();
    },

    onGridpanelCellClick: function(tableview, td, cellIndex, record, tr, rowIndex, e, eOpts) {
        //console.log('this is cellclick');
        //console.log('tableview:',tableview);
        //console.log('td:',td);
        //console.log('cellIndex:',cellIndex);
        //console.log('record:',record);
        //console.log('tr:',tr);
        //console.log('rowIndex:',rowIndex);


    },

    onButtonClick3: function(button, e, eOpts) {
        var getKeyword = Ext.getCmp('searchKeyword_roleInfo').getValue();
        console.log("keyword:",getKeyword);
        var mystore = Ext.StoreMgr.get('uRoleInfoStore'); //获得store对象
        //在load事件中添加参数
        mystore.load({
            params :
            {
                searchKeyword : getKeyword,
                enabled:"true"
            }
        });
    },

    onButtonClick11: function(button, e, eOpts) {
        Ext.getCmp('searchKeyword_roleInfo').setValue('');
        var mystore = Ext.StoreMgr.get('uRoleInfoStore'); //获得store对象
        mystore.load();

    },

    onButtonClick21: function(button, e, eOpts) {
        var win = Ext.widget('db_RoleInfoAddWindow');
        win.show();

    },

    onButtonClick31: function(button, e, eOpts) {
        var getKeyword = Ext.getCmp('searchKeyword_RightInfo').getValue();
        //console.log("keyword:",getKeyword);
        var mystore = Ext.StoreMgr.get('uRightInfoStore'); //获得store对象
        //在load事件中添加参数
        mystore.load({
            params :{
                searchKeyword : getKeyword,
                limit:'300'
            }
        });

    },

    onButtonClick111: function(button, e, eOpts) {
        Ext.getCmp('searchKeyword_RightInfo').setValue('');
        var mystore = Ext.StoreMgr.get('uRightInfoStore'); //获得store对象
        mystore.load();

    },

    onButtonClick211: function(button, e, eOpts) {
        //取得上一级部门id
        var grid = Ext.getCmp('rightInfoGrid');
        var record = grid.getSelectionModel().getSelection();
        if(record.length === 0){
            Ext.MessageBox.confirm('提示','添加新的权限需要先指定上一级权限，如果您没有在列表中勾选上一级权限，</br>那么您添加的权限为最高级别。确定添加？', function(btn){
                if(btn == "yes"){
                    doShowWin(0);
                }
            });
            return;

        }else{
            doShowWin(1);
        }

        function doShowWin(level){
            console.log('level:',level);
            var win = Ext.widget('db_RightInfoAddWindow');
            win.show();

            var rightIdField = Ext.getCmp('wAdd_parentRightId');
            var rightNameField = Ext.getCmp('wAdd_parentRightName');
            //对显示的内容进行处理
            switch(level){
                case 0:	//如果没有上级部门
                    rightIdField.setValue("0000000000");	//如果没有上一级部门，则设为0
                    rightNameField.disable();
                    break;
                case 1:	//如果有上级部门
                    var  rightId = record[0].get("rightId");	//取得上级部门id
                    rightIdField.setValue(rightId);
                    //对部门名称进行处理
                    var rightName = record[0].get("rightName");	//取得上级部门名称

                    var index = rightName.lastIndexOf("&nbsp;");
                    if(index >= 0){
                        var substr = rightName.substring(index+6,rightName.length);
                        rightNameField.setValue(substr);
                    }
                    break;
            }

        }
    },

    onButtonClick31111: function(button, e, eOpts) {
        var getKeyword = Ext.getCmp('searchKeyword_DeptInfo').getValue();
        console.log("keyword:",getKeyword);
        var mystore = Ext.StoreMgr.get('uDeptInfoStore'); //获得store对象
        //在load事件中添加参数
        mystore.load();

    },

    onButtonClick111111: function(button, e, eOpts) {
        Ext.getCmp('searchKeyword_DeptInfo').setValue('');
        var mystore = Ext.StoreMgr.get('uDeptInfoStore'); //获得store对象
        mystore.reload();

    },

    onButtonClick211111: function(button, e, eOpts) {
        //取得上一级部门id
        var grid = Ext.getCmp('deptInfoGrid');
        var record = grid.getSelectionModel().getSelection();
        if(record.length === 0){
            Ext.MessageBox.confirm('提示','添加新的部门需要先指定上一级部门，如果您没有在列表中勾选上一级部门，</br>那么您添加的部门为最高级别。确定添加？', function(btn){
                if(btn == "yes"){
                    doShowWin(0);
                }
            });
            return;

        }else{
            doShowWin(1);
        }
        function doShowWin(level){
            console.log('level:',level);
            var win = Ext.widget('db_DeptInfoAddWindow');
            win.show();

            var deptIdField = Ext.getCmp('deptAdd_parentDeptId');
            //对显示的内容进行处理
            switch(level){
                case 0:	//如果没有上级部门
                deptIdField.setValue("0000000000");	//如果没有上一级部门，则设为0
                break;
                case 1:	//如果有上级部门
                var  deptId = record[0].get("deptId");	//取得上级部门id
                var deptName = record[0].get("deptName");	//取得上级部门名称
                deptIdField.setValue(deptId);
                //对部门名称进行处理
                var deptNameField = Ext.getCmp('deptAdd_parentDeptName');
                var index = deptName.lastIndexOf("&nbsp;");
                if(index >= 0){
                    var substr = deptName.substring(index+6,deptName.length);
                    deptNameField.setValue(substr);
                }
                break;
            }

        }
    }

});