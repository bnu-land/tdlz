{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "infoVoteUpdateTab",
        "designer|userClassName": "infoVoteUpdateTab",
        "id": "infoVoteUpdateTab",
        "layout": "fit",
        "title": ""
    },
    "designerId": "ef79a24e-8878-4ae4-a30e-16b772799def",
    "cn": [
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "baseParams": [
                    "{voteId:''}"
                ],
                "bodyPadding": 10,
                "designer|snapToGrid": 10,
                "id": "infoVotePublishForm1",
                "jsonSubmit": true,
                "layout": "absolute",
                "title": ""
            },
            "name": "MyForm36",
            "designerId": "787140e0-328f-499a-a68d-a56a0b05c694",
            "cn": [
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "投票Id",
                        "layout|x": 40,
                        "layout|y": 10,
                        "name": "voteId",
                        "width": 690
                    },
                    "name": "MyTextField205",
                    "designerId": "b9242d4e-ecfc-43d4-a64c-3c7b8e381778"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "投票主题",
                        "hidden": true,
                        "layout|x": 40,
                        "layout|y": 10,
                        "name": "voteTitle",
                        "width": 690
                    },
                    "name": "MyTextField206",
                    "designerId": "a460e017-5afa-42b3-bde0-782b798817b2"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "投票简介",
                        "height": 100,
                        "layout|x": 40,
                        "layout|y": 40,
                        "name": "voteIntroduction",
                        "width": 690
                    },
                    "name": "MyTextField207",
                    "designerId": "19f25519-b132-42a9-9569-8ebb6d4ac7ff"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dock": null,
                        "fieldLabel": "发起人",
                        "layout|x": 40,
                        "layout|y": 150,
                        "name": "voteVoter",
                        "width": 690
                    },
                    "name": "MyTextField208",
                    "designerId": "cd15f22f-c029-401f-8f5d-4fb30a8128f5"
                },
                {
                    "type": "Ext.form.RadioGroup",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "投票类型",
                        "layout|x": 40,
                        "layout|y": 180,
                        "width": 210
                    },
                    "name": "MyRadioGroup5",
                    "designerId": "9835ce94-4cdf-480b-8dbf-2ceee7fbe505",
                    "cn": [
                        {
                            "type": "Ext.form.field.Radio",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "boxLabel": "单选",
                                "fieldLabel": null,
                                "inputValue": "单选",
                                "name": "voteClass"
                            },
                            "name": "MyRadio14",
                            "designerId": "be00752e-554a-459b-b8c8-00cea13e7ce7"
                        },
                        {
                            "type": "Ext.form.field.Radio",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "boxLabel": "多选",
                                "fieldLabel": null,
                                "inputValue": "多选",
                                "name": "voteClass"
                            },
                            "name": "MyRadio15",
                            "designerId": "9eee5d31-9735-4773-89d6-29d555a3c62a"
                        }
                    ]
                },
                {
                    "type": "Ext.form.field.Display",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "开始时间",
                        "layout|x": 270,
                        "layout|y": 180,
                        "name": "voteStarttime",
                        "width": 220
                    },
                    "name": "MyDisplayField",
                    "designerId": "7a7a43a2-443c-4238-b9b1-3db58bcd59ac"
                },
                {
                    "type": "Ext.form.field.Date",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "结束时间",
                        "format": "Y-m-d",
                        "layout|x": 500,
                        "layout|y": 180,
                        "name": "voteEndtime",
                        "width": 220
                    },
                    "name": "MyDateField45",
                    "designerId": "ae06a167-226b-4828-8ea6-44bfc8536a0e"
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "height": 319,
                        "id": "infoVoteoptionGrid1",
                        "layout|x": 140,
                        "layout|y": 210,
                        "store": "InfoVoteoptionAddStore",
                        "title": "",
                        "width": 590
                    },
                    "name": "MyGridPanel38",
                    "designerId": "f74cf853-d01a-4328-945f-21413ea4d7dc",
                    "cn": [
                        {
                            "type": "Ext.grid.RowNumberer",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "name": "MyRowNumberer31",
                            "designerId": "2d3ba5dd-bc18-49ec-8c67-293a4d53ce5f"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "voptionContent",
                                "text": "选项内容"
                            },
                            "name": "MyColumn201",
                            "designerId": "0969f902-5b22-4bdb-b382-22fe54999cac"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "voptionNumber",
                                "text": "投票数目"
                            },
                            "name": "MyColumn202",
                            "designerId": "94237141-d02d-4b4e-93ea-3ffedbac9b0d"
                        },
                        {
                            "type": "Ext.grid.View",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyGridView38",
                            "designerId": "9a86f70b-34ba-4203-bfd8-4b94c525485f"
                        },
                        {
                            "type": "Ext.toolbar.Toolbar",
                            "reference": {
                                "name": "dockedItems",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dock": "top"
                            },
                            "name": "MyToolbar52",
                            "designerId": "a2f8e2ab-3720-41c5-929c-390bb1d908d6",
                            "cn": [
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|flex": null,
                                        "text": "增加选项"
                                    },
                                    "name": "MyButton209",
                                    "designerId": "8fc1aae2-3c28-499d-9286-2aae7db9d643",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "button",
                                                    "event"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "var voptionPanel = Ext.widget(\"infoVoteoptionShowTab\");\r",
                                                    "var voptionwin = new Ext.Window({\r",
                                                    "\r",
                                                    "    title: '增加选项',\r",
                                                    "    closable: true,\r",
                                                    "    layout: 'fit',\r",
                                                    "    jsonSubmit: true,\r",
                                                    "    items:[\r",
                                                    "\r",
                                                    "    {\r",
                                                    "        xtype: 'form',\r",
                                                    "        id: 'voptionForm',\r",
                                                    "        layout: {\r",
                                                    "            type: 'auto'\r",
                                                    "        },\r",
                                                    "        bodyPadding: 10,\r",
                                                    "        jsonSubmit: true,\r",
                                                    "        title: '',\r",
                                                    "        items: [\r",
                                                    "        {\r",
                                                    "            xtype: 'textfield',\r",
                                                    "            id: 'voptionContent',\r",
                                                    "            width: 340,\r",
                                                    "            fieldLabel: '投票选项',\r",
                                                    "            name: 'voptionContent'\r",
                                                    "        },\r",
                                                    "        {\r",
                                                    "            xtype: 'button',\r",
                                                    "            handler: function(button, event) {\r",
                                                    "                var myform = Ext.getCmp('voptionForm').getForm();\r",
                                                    "\r",
                                                    "                if (myform.isValid()) { \r",
                                                    "                    myform.submit({\r",
                                                    "                        url:'add_voteoption',\r",
                                                    "                        success: function(form, action) {\r",
                                                    "                            Ext.Msg.alert('成功', '增加选项成功');\r",
                                                    "\r",
                                                    "                            var mystore = Ext.StoreMgr.get('InfoVoteoptionAddStore');//获得store对象  \r",
                                                    "\r",
                                                    "                            mystore.load();\r",
                                                    "                            voptionwin.close();\r",
                                                    "\r",
                                                    "                        },\r",
                                                    "                        failure: function(form, action) {\r",
                                                    "                            Ext.Msg.alert('失败', '修改内容失败');              \r",
                                                    "                            voptionwin.close();\r",
                                                    "                        }\r",
                                                    "                    });\r",
                                                    "                } else {\r",
                                                    "                    Ext.Msg.alert('注意', '填写信息不能为空，请检查！');\r",
                                                    "                }\r",
                                                    "\r",
                                                    "                return;\r",
                                                    "            },\r",
                                                    "            text: '确定'\r",
                                                    "        }\r",
                                                    "        ]\r",
                                                    "    }\r",
                                                    "\r",
                                                    "\r",
                                                    "\r",
                                                    "    ]    \r",
                                                    "});\r",
                                                    "voptionwin.show();"
                                                ]
                                            },
                                            "name": "handler",
                                            "designerId": "efe2f8f3-8ee9-49b3-8fb3-7f5ce1da33e7"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|flex": null,
                                        "text": "删除选项"
                                    },
                                    "name": "MyButton210",
                                    "designerId": "3b9a5d28-d8f2-4124-8c1e-0662a00e8233",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "button",
                                                    "event"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "var grid = Ext.getCmp('infoVoteoptionGrid');\r",
                                                    "\r",
                                                    "var record = grid.getSelectionModel().getSelection();\r",
                                                    "\r",
                                                    "if(record.length === 0){\r",
                                                    "    Ext.Msg.alert('提示','请先选择您要操作的行！');    \r",
                                                    "    return;\r",
                                                    "\r",
                                                    "}else{\r",
                                                    "\r",
                                                    "\r",
                                                    "    var  voptionIds =new Array(record.length);\r",
                                                    "    for(var i = 0;i<record.length;i++){\r",
                                                    "        voptionIds[i] = record[i].get(\"voptionId\");\r",
                                                    "\r",
                                                    "    }\r",
                                                    "\r",
                                                    "\r",
                                                    "    Ext.Ajax.request({\r",
                                                    "        url:'del_voptionIds',\r",
                                                    "        params:{voptionIds:voptionIds},\r",
                                                    "\r",
                                                    "        success:function(response){\r",
                                                    "            Ext.Msg.alert('成功','删除成功');\r",
                                                    "            var mystore = Ext.StoreMgr.get('InfoVoteoptionAddStore');\r",
                                                    "            mystore.load();\r",
                                                    "\r",
                                                    "        }\r",
                                                    "\r",
                                                    "    });\r",
                                                    "\r",
                                                    "}"
                                                ]
                                            },
                                            "name": "handler",
                                            "designerId": "bd5f77f2-7952-4517-ac97-ff4c47719214"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.selection.CheckboxModel",
                            "reference": {
                                "name": "selModel",
                                "type": "object"
                            },
                            "codeClass": "Ext.selection.CheckboxModel",
                            "name": "MyCheckboxSelectionModel30",
                            "designerId": "c3a997b7-4826-46a5-9ccb-f9c138b58105"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 170,
                        "layout|y": 540,
                        "text": "确定修改"
                    },
                    "name": "MyButton211",
                    "designerId": "4cb61bc6-e4c5-4c46-b131-265b2712e314",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "button",
                                    "event"
                                ],
                                "fn": "handler",
                                "implHandler": [
                                    "var myform = Ext.getCmp('infoVotePublishForm').getForm();\r",
                                    "\r",
                                    "if (myform.isValid()) { \r",
                                    "    myform.submit({\r",
                                    "        url:'add_vote',\r",
                                    "        success: function(form, action) {\r",
                                    "            Ext.Msg.alert('成功', '增加选项成功');\r",
                                    "\r",
                                    "            var mystore = Ext.StoreMgr.get('InfoVoteStore'); //获得store对象  \r",
                                    "\r",
                                    "            mystore.load();\r",
                                    "\r",
                                    "\r",
                                    "        },\r",
                                    "        failure: function(form, action) {\r",
                                    "            Ext.Msg.alert('失败', '修改内容失败');              \r",
                                    "\r",
                                    "        }\r",
                                    "    });\r",
                                    "} else {\r",
                                    "    Ext.Msg.alert('注意', '填写信息不能为空，请检查！');\r",
                                    "}\r",
                                    "\r",
                                    "return;"
                                ]
                            },
                            "name": "handler",
                            "designerId": "9d3a7025-4a6f-49a2-ba67-cbde46075f86"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 380,
                        "layout|y": 540,
                        "text": "取消",
                        "width": 80
                    },
                    "name": "MyButton212",
                    "designerId": "a2c50260-56ae-476b-a188-6eab3e43e582"
                }
            ]
        }
    ]
}