{
    "type": "Ext.panel.Panel",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userAlias": "infoVotePublishTab",
        "designer|userClassName": "infoVotePublishTab",
        "id": "infoVotePublishTab",
        "layout": "fit",
        "title": ""
    },
    "designerId": "1ba38885-b024-4d63-b840-8cf43e15cb26",
    "cn": [
        {
            "type": "Ext.form.Panel",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "bodyPadding": 10,
                "designer|snapToGrid": 10,
                "id": "infoVotePublishForm",
                "jsonSubmit": true,
                "layout": "absolute",
                "title": ""
            },
            "name": "MyForm35",
            "designerId": "e5ce8315-4a08-42b2-b7fc-36dd0919b075",
            "cn": [
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "投票主题",
                        "layout|x": 40,
                        "layout|y": 10,
                        "name": "voteTitle",
                        "width": 690
                    },
                    "name": "MyTextField202",
                    "designerId": "b4ffe321-4a75-4ed6-9980-f51977262325"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "投票简介",
                        "height": 100,
                        "layout|x": 40,
                        "layout|y": 40,
                        "name": "voteIntroduction",
                        "width": 690
                    },
                    "name": "MyTextField203",
                    "designerId": "41f22fff-8c27-44ab-8d85-7351c6dc191f"
                },
                {
                    "type": "Ext.form.field.Text",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "dock": null,
                        "fieldLabel": "发起人",
                        "layout|x": 40,
                        "layout|y": 150,
                        "name": "voteVoter",
                        "width": 690
                    },
                    "name": "MyTextField204",
                    "designerId": "2f76009d-65de-402b-8475-1bd1e1ac841a"
                },
                {
                    "type": "Ext.form.RadioGroup",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "投票类型",
                        "layout|x": 40,
                        "layout|y": 180,
                        "width": 320
                    },
                    "name": "MyRadioGroup4",
                    "designerId": "96672bdb-c103-47ef-a48c-f0c27018873c",
                    "cn": [
                        {
                            "type": "Ext.form.field.Radio",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "boxLabel": "单选",
                                "fieldLabel": null,
                                "inputValue": "单选",
                                "name": "voteClass"
                            },
                            "name": "MyRadio12",
                            "designerId": "3ea5ba44-32dc-4751-8741-3a6016aa9ff0"
                        },
                        {
                            "type": "Ext.form.field.Radio",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "boxLabel": "多选",
                                "fieldLabel": null,
                                "inputValue": "多选",
                                "name": "voteClass"
                            },
                            "name": "MyRadio13",
                            "designerId": "6cd6ac76-b9f8-4003-97ab-15a2d7f7c650"
                        }
                    ]
                },
                {
                    "type": "Ext.form.field.Date",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "fieldLabel": "结束时间",
                        "format": "Y-m-d",
                        "layout|x": 410,
                        "layout|y": 180,
                        "name": "voteEndtime",
                        "width": 260
                    },
                    "name": "MyDateField44",
                    "designerId": "e353c2c1-8bed-4640-9dc2-8badb2ba1329"
                },
                {
                    "type": "Ext.grid.Panel",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "height": 319,
                        "id": "infoVoteoptionGrid",
                        "layout|x": 140,
                        "layout|y": 210,
                        "store": "InfoVoteoptionAddStore",
                        "title": "",
                        "width": 590
                    },
                    "name": "MyGridPanel37",
                    "designerId": "2b48e004-4564-4138-be4d-bb48fff94ac2",
                    "cn": [
                        {
                            "type": "Ext.grid.RowNumberer",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "name": "MyRowNumberer30",
                            "designerId": "be3f0f5f-6a81-44f0-87ef-a7430a8138de"
                        },
                        {
                            "type": "Ext.grid.column.Column",
                            "reference": {
                                "name": "columns",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dataIndex": "voptionContent",
                                "text": "选项内容"
                            },
                            "name": "MyColumn200",
                            "designerId": "8d0714ad-c2af-44fa-b138-193ae6ba0484"
                        },
                        {
                            "type": "Ext.grid.View",
                            "reference": {
                                "name": "viewConfig",
                                "type": "object"
                            },
                            "codeClass": null,
                            "name": "MyGridView37",
                            "designerId": "269f5098-a500-4b68-b1d7-5eed40cb2b43"
                        },
                        {
                            "type": "Ext.toolbar.Toolbar",
                            "reference": {
                                "name": "dockedItems",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "dock": "top"
                            },
                            "name": "MyToolbar51",
                            "designerId": "598c382d-83e4-4105-b099-c35ae2a708fa",
                            "cn": [
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|flex": null,
                                        "text": "增加选项"
                                    },
                                    "name": "MyButton205",
                                    "designerId": "2cf2edc4-4c6b-4ef2-a65f-b9859cddebb7",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "button",
                                                    "event"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "var voptionPanel = Ext.widget(\"infoVoteoptionShowTab\");\r",
                                                    "var voptionwin = new Ext.Window({\r",
                                                    "\r",
                                                    "    title: '增加选项',\r",
                                                    "    closable: true,\r",
                                                    "    layout: 'fit',\r",
                                                    "    jsonSubmit: true,\r",
                                                    "    items:[\r",
                                                    "\r",
                                                    "    {\r",
                                                    "        xtype: 'form',\r",
                                                    "        id: 'voptionForm',\r",
                                                    "        layout: {\r",
                                                    "            type: 'auto'\r",
                                                    "        },\r",
                                                    "        bodyPadding: 10,\r",
                                                    "        jsonSubmit: true,\r",
                                                    "        title: '',\r",
                                                    "        items: [\r",
                                                    "        {\r",
                                                    "            xtype: 'textfield',\r",
                                                    "            id: 'voptionContent',\r",
                                                    "            width: 340,\r",
                                                    "            fieldLabel: '投票选项',\r",
                                                    "            name: 'voptionContent'\r",
                                                    "        },\r",
                                                    "        {\r",
                                                    "            xtype: 'button',\r",
                                                    "            handler: function(button, event) {\r",
                                                    "                var myform = Ext.getCmp('voptionForm').getForm();\r",
                                                    "\r",
                                                    "                if (myform.isValid()) { \r",
                                                    "                    myform.submit({\r",
                                                    "                        url:'add_voteoption',\r",
                                                    "                        success: function(form, action) {\r",
                                                    "                            Ext.Msg.alert('成功', '增加选项成功');\r",
                                                    "\r",
                                                    "                            var mystore = Ext.StoreMgr.get('InfoVoteoptionAddStore');//获得store对象  \r",
                                                    "\r",
                                                    "                            mystore.load({\r",
                                                    "                                params:{voteId:0}\r",
                                                    "\r",
                                                    "                            });\r",
                                                    "                            voptionwin.close();\r",
                                                    "\r",
                                                    "                        },\r",
                                                    "                        failure: function(form, action) {\r",
                                                    "                            Ext.Msg.alert('失败', '修改内容失败');              \r",
                                                    "                            voptionwin.close();\r",
                                                    "                        }\r",
                                                    "                    });\r",
                                                    "                } else {\r",
                                                    "                    Ext.Msg.alert('注意', '填写信息不能为空，请检查！');\r",
                                                    "                }\r",
                                                    "\r",
                                                    "                return;\r",
                                                    "            },\r",
                                                    "            text: '确定'\r",
                                                    "        }\r",
                                                    "        ]\r",
                                                    "    }\r",
                                                    "\r",
                                                    "\r",
                                                    "\r",
                                                    "    ]    \r",
                                                    "});\r",
                                                    "voptionwin.show();"
                                                ]
                                            },
                                            "name": "handler",
                                            "designerId": "317c7bce-0a5b-4485-bef3-665b8eb095d5"
                                        }
                                    ]
                                },
                                {
                                    "type": "Ext.button.Button",
                                    "reference": {
                                        "name": "items",
                                        "type": "array"
                                    },
                                    "codeClass": null,
                                    "userConfig": {
                                        "layout|flex": null,
                                        "text": "删除选项"
                                    },
                                    "name": "MyButton206",
                                    "designerId": "e7df8f62-d0eb-4013-9223-318a196be57a",
                                    "cn": [
                                        {
                                            "type": "fixedfunction",
                                            "reference": {
                                                "name": "items",
                                                "type": "array"
                                            },
                                            "codeClass": null,
                                            "userConfig": {
                                                "designer|params": [
                                                    "button",
                                                    "event"
                                                ],
                                                "fn": "handler",
                                                "implHandler": [
                                                    "var grid = Ext.getCmp('infoVoteoptionGrid');\r",
                                                    "\r",
                                                    "var record = grid.getSelectionModel().getSelection();\r",
                                                    "\r",
                                                    "if(record.length === 0){\r",
                                                    "    Ext.Msg.alert('提示','请先选择您要操作的行！');    \r",
                                                    "    return;\r",
                                                    "\r",
                                                    "}else{\r",
                                                    "\r",
                                                    "\r",
                                                    "    var  voptionIds =new Array(record.length);\r",
                                                    "    for(var i = 0;i<record.length;i++){\r",
                                                    "        voptionIds[i] = record[i].get(\"voptionId\");\r",
                                                    "\r",
                                                    "    }\r",
                                                    "\r",
                                                    "\r",
                                                    "    Ext.Ajax.request({\r",
                                                    "        url:'del_voptionIds',\r",
                                                    "        params:{voptionIds:voptionIds},\r",
                                                    "\r",
                                                    "        success:function(response){\r",
                                                    "            Ext.Msg.alert('成功','删除成功');\r",
                                                    "            var mystore = Ext.StoreMgr.get('InfoVoteoptionAddStore');\r",
                                                    "            mystore.load();\r",
                                                    "\r",
                                                    "        }\r",
                                                    "\r",
                                                    "    });\r",
                                                    "\r",
                                                    "}"
                                                ]
                                            },
                                            "name": "handler",
                                            "designerId": "f0d3c836-19de-4ea2-bca5-461d060bcda8"
                                        }
                                    ]
                                }
                            ]
                        },
                        {
                            "type": "Ext.selection.CheckboxModel",
                            "reference": {
                                "name": "selModel",
                                "type": "object"
                            },
                            "codeClass": "Ext.selection.CheckboxModel",
                            "name": "MyCheckboxSelectionModel29",
                            "designerId": "f1482106-cd4e-4e8f-b885-50a989e7085e"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 170,
                        "layout|y": 540,
                        "text": "确定发起投票"
                    },
                    "name": "MyButton207",
                    "designerId": "02e73a55-ae97-441e-9a79-dc6194c2076e",
                    "cn": [
                        {
                            "type": "fixedfunction",
                            "reference": {
                                "name": "items",
                                "type": "array"
                            },
                            "codeClass": null,
                            "userConfig": {
                                "designer|params": [
                                    "button",
                                    "event"
                                ],
                                "fn": "handler",
                                "implHandler": [
                                    "var myform = Ext.getCmp('infoVotePublishForm').getForm();\r",
                                    "\r",
                                    "if (myform.isValid()) { \r",
                                    "    myform.submit({\r",
                                    "        url:'add_vote',\r",
                                    "        success: function(form, action) {\r",
                                    "            Ext.Msg.alert('成功', '增加选项成功');\r",
                                    "\r",
                                    "            var mystore = Ext.StoreMgr.get('InfoVoteStore'); //获得store对象  \r",
                                    "\r",
                                    "            mystore.load();\r",
                                    "\r",
                                    "\r",
                                    "        },\r",
                                    "        failure: function(form, action) {\r",
                                    "            Ext.Msg.alert('失败', '修改内容失败');              \r",
                                    "\r",
                                    "        }\r",
                                    "    });\r",
                                    "} else {\r",
                                    "    Ext.Msg.alert('注意', '填写信息不能为空，请检查！');\r",
                                    "}\r",
                                    "\r",
                                    "return;"
                                ]
                            },
                            "name": "handler",
                            "designerId": "eace5ee5-dbe7-46a5-bdff-b4146894054d"
                        }
                    ]
                },
                {
                    "type": "Ext.button.Button",
                    "reference": {
                        "name": "items",
                        "type": "array"
                    },
                    "codeClass": null,
                    "userConfig": {
                        "layout|x": 380,
                        "layout|y": 540,
                        "text": "重置",
                        "width": 80
                    },
                    "name": "MyButton208",
                    "designerId": "abcc40fe-daf9-46c0-a0e0-9462379290f3"
                }
            ]
        }
    ]
}